function deep_link(n){function o(n,o){document.location=n,setTimeout(function(){document.location=o},250)}function i(n,o){var i=document.createElement("iframe");i.style.border="none",i.style.width="1px",i.style.height="1px",i.onload=function(){document.location=n},i.src=n,window.onload=function(){document.body.appendChild(i),setTimeout(function(){window.location=o},25)}}function e(){s.match(/CriOS/)||s.match(/Safari/)&&s.match(/Version\/9/)?o(f.deep_link,f.ios_store_link||f.fallback):i(f.deep_link,f.ios_store_link||f.fallback)}function t(){s.match(/Chrome/)?document.location=f.android_intent:s.match(/Firefox/)?o(f.deep_link,f.play_store_link||f.fallback):i(l,f.play_store_link||f.fallback)}var a=n.fallback||"",l=n.url||"",d=n.ios_store_link,c=n.android_package_name,r="https://market.android.com/details?id="+c,s=window.navigator.userAgent,_=l.split(/:\/\/(.+)/),u=_[0],k=_[1]||"",f={deep_link:l,ios_store_link:d,android_intent:"intent://"+k+"#Intent;scheme="+u+";package="+c+";end;",play_store_link:r,fallback:a},m={android:function(){return/Android/i.test(s)},ios:function(){return/iPhone|iPad|iPod/i.test(s)}};m.ios()&&f.deep_link&&f.ios_store_link?e():m.android()&&c?t():window.location=f.fallback}"undefined"!=typeof module&&(module.exports=deep_link);
function cq5forms_isArray(e){return"number"==typeof e.length&&e.item}function cq5forms_showMsg(e,t,n,r){var i=document.forms[e].elements[t];alert(n),cq5forms_isArray(i)?(r||(r=0),i[r].focus()):i.focus()}function cq5forms_isEmpty(e){if(void 0===e)return!1;var t=!0;if(cq5forms_isArray(e))for(i=0;i<e.length;i++)"radio"==e[i].type||"checkbox"==e[i].type?e[i].checked&&(t=!1):"option"==e[i].localName?e[i].selected&&(t=!1):e[i].value.length>0&&(t=!1);else"radio"==e.type||"checkbox"==e.type?e.checked&&(t=!1):e.value.length>0&&(t=!1);return t}function cq5forms_regcheck(e,t){var n=!1,r=t.exec(e);if(r){var i=e.length,o=r[0].length;n=o==i}return n}function cq5forms_multiResourceChange(e,t,n){if(n||(e||(e=window.event),!(e.keyCode<48&&8!=e.keyCode&&46!=e.keyCode)))try{document.getElementById(t).checked=!0}catch(r){}}window.Granite=window.Granite||{},Granite.Sling={SELECTOR_INFINITY:".infinity",CHARSET:"_charset_",STATUS:":status",STATUS_BROWSER:"browser",OPERATION:":operation",OPERATION_DELETE:"delete",OPERATION_MOVE:"move",DELETE_SUFFIX:"@Delete",TYPEHINT_SUFFIX:"@TypeHint",COPY_SUFFIX:"@CopyFrom",MOVE_SUFFIX:"@MoveFrom",ORDER:":order",REPLACE:":replace",DESTINATION:":dest",SAVE_PARAM_PREFIX:":saveParamPrefix",IGNORE_PARAM:":ignore",REQUEST_LOGIN_PARAM:"sling:authRequestLogin",LOGIN_URL:"/system/sling/login.html",LOGOUT_URL:"/system/sling/logout.html"},function(e,t){e.Util=function(){var e={patchText:function(e,n){if(n)if(t.isArray(n))for(var r=0;r<n.length;r++)e=e.replace("{"+r+"}",n[r]);else e=e.replace("{0}",n);return e},getTopWindow:function(){var e=window;if(this.iFrameTopWindow)return this.iFrameTopWindow;try{for(;e.parent&&e!==e.parent&&e.parent.location.href;)e=e.parent}catch(t){}return e},setIFrameMode:function(e){this.iFrameTopWindow=e||window},applyDefaults:function(){for(var t,n=arguments[0]||{},r=1;r<arguments.length;r++){t=arguments[r];for(var i in t){var o=t[i];t.hasOwnProperty(i)&&o&&("object"!=typeof o||o instanceof Array?o instanceof Array?n[i]=o.slice(0):n[i]=o:n[i]=e.applyDefaults(n[i],o))}}return n},getKeyCode:function(e){return e.keyCode?e.keyCode:e.which}};return e}()}(Granite,jQuery),function(Granite,util,sling,$){Granite.HTTP=function(){var contextPath=null,SCRIPT_URL_REGEXP=/^(?:http|https):\/\/[^\/]+(\/[^\/]+)\/(?:etc|libs|apps)\/.*\.js(\?.*)?$/,ENCODE_PATH_REGEXP=/[^1\w-\.!~\*'\(\)\/%;:@&=\$,]/,loginRedirected=!1,self={};return self.getSchemeAndAuthority=function(e){var t;try{return-1==e.indexOf("://")?"":(t=e.indexOf("/",e.indexOf("://")+3),-1==t?e:e.substring(0,t))}catch(n){return""}},self.getContextPath=function(){return contextPath},self.detectContextPath=function(){try{if(window.CQURLInfo)contextPath=CQURLInfo.contextPath||"";else{for(var e=document.getElementsByTagName("script"),t=0;t<e.length;t++){var n=SCRIPT_URL_REGEXP.exec(e[t].src);if(n)return void(contextPath=n[1])}contextPath=""}}catch(r){}},self.externalize=function(e){try{0==e.indexOf("/")&&contextPath&&0!=e.indexOf(contextPath+"/")&&(e=contextPath+e)}catch(t){}return e},self.internalize=function(e,t){if("/"==e.charAt(0))return contextPath?e.substring(contextPath.length):e;t||(t=document);var n=self.getSchemeAndAuthority(t.location.href),r=self.getSchemeAndAuthority(e);return n==r?e.substring(r.length+(contextPath?contextPath.length:0)):e},self.getPath=function(e){if(e)e=self.removeParameters(e),e=self.removeAnchor(e);else{if(window.CQURLInfo&&CQURLInfo.requestPath)return CQURLInfo.requestPath;e=window.location.pathname}e=self.internalize(e);var t=e.indexOf(".",e.lastIndexOf("/"));return-1!=t&&(e=e.substring(0,t)),e},self.removeAnchor=function(e){return-1!=e.indexOf("#")?e.substring(0,e.indexOf("#")):e},self.removeParameters=function(e){return-1!=e.indexOf("?")?e.substring(0,e.indexOf("?")):e},self.encodePathOfURI=function(e){var t,n;return-1!=e.indexOf("?")?(t=e.split("?"),n="?"):-1!=e.indexOf("#")?(t=e.split("#"),n="#"):t=[e],ENCODE_PATH_REGEXP.test(t[0])&&(t[0]=self.encodePath(t[0])),t.join(n)},self.encodePath=function(e){return e=encodeURI(e).replace(/%5B/g,"[").replace(/%5D/g,"]"),e=e.replace(/\+/g,"%2B"),e=e.replace(/\?/g,"%3F"),e=e.replace(/;/g,"%3B"),e=e.replace(/#/g,"%23"),e=e.replace(/=/g,"%3D"),e=e.replace(/\$/g,"%24"),e=e.replace(/,/g,"%2C"),e=e.replace(/'/g,"%27"),e=e.replace(/"/g,"%22")},self.handleLoginRedirect=function(){if(!loginRedirected){loginRedirected=!0,alert(Granite.I18n.get("Your request could not be completed because you have been signed out."));var e=util.getTopWindow().document.location;e.href=self.externalize(sling.LOGIN_URL)+"?resource="+e.pathname+encodeURIComponent(e.search)+e.hash}},self.getXhrHook=function(e,t,n){if(t=t||"GET",window.G_XHR_HOOK&&$.isFunction(G_XHR_HOOK)){var r={url:e,method:t};return n&&(r.params=n),G_XHR_HOOK(r)}return null},self.eval=function(response){"object"!=typeof response&&(response=$.ajax({url:response,type:"get",async:!1}));try{return eval("("+(response.body?response.body:response.responseText)+")")}catch(e){}return null},self}()}(Granite,Granite.Util,Granite.Sling,jQuery),function(e,t,n,r){e.I18n=function(){var i={},o=!1,a="/libs/cq/i18n/dict.",s=".json",c="en",l=!1,u=null,d={};return d.LOCALE_DEFAULT="en",d.PSEUDO_LANGUAGE="zz",d.PSEUDO_PATTERN_KEY="_pseudoPattern_",d.init=function(e){e||(e=new Object),e.locale&&this.setLocale(e.locale),a=e.urlPrefix||a,s=e.urlSuffix||s,o=!0},d.setLocale=function(e){c=e},d.getLocale=function(){return c&&r.isFunction(c)&&(c=c()),c},d.setUrlPrefix=function(e){a=e},d.setUrlSuffix=function(e){s=e},d.getDictionary=function(t){if(t=t||d.getLocale()||e.I18n.LOCALE_DEFAULT,!i[t]){l=0==t.indexOf(d.PSEUDO_LANGUAGE);var n=a+t+s;try{var o=r.ajax(n,{async:!1,dataType:"json"});i[t]=r.parseJSON(o.responseText)}catch(c){}i[t]||(i[t]={})}return i[t]},d.get=function(e,n,r){var i,a,s;return o&&(i=d.getDictionary()),s=l?d.PSEUDO_PATTERN_KEY:r?e+" (("+r+"))":e,i&&(a=i[s]),a||(a=e),l&&(a=a.replace("{string}",e).replace("{comment}",r?r:"")),t.patchText(a,n)},d.getVar=function(e,t){return e?d.get(e,null,t):null},d.getLanguages=function(){if(!u)try{var e=n.eval("/libs/wcm/core/resources/languages.overlay.infinity.json");r.each(e,function(e,t){t.title=d.getVar(t.language),t.title&&t.country&&"*"!=t.country&&(t.title+=" ("+d.getVar(t.country)+")")}),u=e}catch(t){u={}}return u},d.parseLocale=function(e){if(!e)return null;var t=e.indexOf("_");0>t&&(t=e.indexOf("-"));var n,r;return 0>t?(n=e,r=null):(n=e.substring(0,t),r=e.substring(t+1)),{code:e,language:n,country:r}},d}()}(Granite,Granite.Util,Granite.HTTP,jQuery),function(e,t){var n=function(){var e={visibility:"hidden",position:"absolute",width:"30px",height:"30px","-webkit-border-radius":"20px","border-radius":"20px",border:"5px solid orange","-webkit-user-select":"none","user-select":"none",opacity:"0.5","z-index":"2000","pointer-events":"none"},n={},r=[];return{debugWithMouse:!1,init:function(){var e=this;t(document).on("touchstart.touchindicator touchmove.touchindicator touchend.touchindicator",function(t){var n=t.originalEvent.touches;return e.update(n),!0}),this.debugWithMouse&&t(document).on("mousemove.touchindicator",function(t){return t.identifer="fake",e.update([t]),!0})},update:function(i){for(var o={},a=0;a<i.length;a++){var s=i[a],c=s.identifier,l=n[c];l||(l=r.pop(),l||(l=t("<div></div>").css(e),t("body").append(l))),o[c]=l,l.offset({left:s.pageX-20,top:s.pageY-20}),l.css("visibility","visible")}for(c in n)n.hasOwnProperty(c)&&!o[c]&&(l=n[c],l.css("visibility","hidden"),r.push(l));n=o}}};e.TouchIndicator=new n}(Granite,jQuery),function(e,t,n,r){e.OptOutUtil=function(){var e={},t=[],n=[];return e.init=function(e){e&&(t=e.cookieNames?e.cookieNames:t,n=e.whitelistCookieNames?e.whitelistCookieNames:n)},e.getCookieNames=function(){return t},e.getWhitelistCookieNames=function(){return n},e.isOptedOut=function(){for(var t=document.cookie.split(";"),n=0;n<t.length;n++){var i=t[n],o=r.trim(i.split("=")[0]);if(r.inArray(o,e.getCookieNames())>-1)return!0}return!1},e.maySetCookie=function(t){return!(e.isOptedOut()&&-1===r.inArray(t,e.getWhitelistCookieNames()))},e}()}(Granite,Granite.Util,Granite.HTTP,jQuery),Granite.OptOutUtil.init(window.GraniteOptOutConfig),Granite.HTTP.detectContextPath(),Granite.I18n.init(),function(e,t,n){var r;t.Granite=t.Granite||{},t.Granite.$=t.Granite.$||e,t._g=t._g||{},t._g.$=t._g.$||e,r=Granite.HTTP,e.ajaxSetup({externalize:!0,encodePath:!0,hook:!0,beforeSend:function(t,n){if("undefined"!=typeof G_IS_HOOKED&&G_IS_HOOKED(n.url)||(n.externalize&&(n.url=r.externalize(n.url)),n.encodePath&&(n.url=r.encodePathOfURI(n.url))),n.hook){var i=r.getXhrHook(n.url,n.type,n.data);i&&(n.url=i.url,i.params&&("GET"==n.type.toUpperCase()?n.url+="?"+e.param(i.params):n.data=e.param(i.params)))}},statusCode:{403:function(e){"Authentication Failed"===e.getResponseHeader("X-Reason")&&r.handleLoginRedirect()}}}),e.ajaxSettings.traditional=!0}(jQuery,this),window.$CQ=_g.$,function(e){e(function(){function t(t,n){try{(e.cq.isAuthor()||"#debug"==window.location.hash)&&("undefined"!=typeof console&&"undefined"!=typeof console.log&&(console.log(t),console.log(n)),alert(t.name+":\n"+t.message+".\n"+n+"."))}catch(r){}}function n(n){try{window.location.hash.length>0&&e(window.location.hash,n).length>0&&(window.location=(window.location+"").replace(window.location.hash,""))}catch(r){t(r,"Could not remove hash")}}try{var r=e.browser.msie?0:250;try{e(".cq-carousel").each(function(){function t(){i(),a>0&&(h=setInterval(function(){e(l[(p+1)%l.length]).click()},a))}function i(){null!==h&&(clearInterval(h),h=null)}var o=e(this),a=+e("var[title='play-delay']",this).text();a||(a=6e3);var s=+e("var[title='transition-time']",this).text();s||(s=1e3);var c=(e(".cq-carousel-banners",this),e(".cq-carousel-banner-switch",this)),l=c.find("a"),u=e(".cq-carousel-banner-item",this),d=u.outerWidth(),f=u.filter(":first"),g=null,h=null,p=0,_=e("a.cq-carousel-control-prev",this);_.click(function(){return _.is(".cq-carousel-active")&&e(l[(p+l.length-1)%l.length]).click(),!1});var m=e("a.cq-carousel-control-next",this);m.click(function(){return m.is(".cq-carousel-active")&&e(l[(p+1)%l.length]).click(),!1}),l.length>1&&m.addClass("cq-carousel-active"),r||e.browser.version>6?f.css("left",0):f.show(),l.click(function(){var t=e(this),n=u.filter(t.attr("href")),i=n.prevAll().length,o=i>p||null!==h?1:-1;return t.is(".cq-carousel-active")||(l.removeClass("cq-carousel-active"),t.addClass("cq-carousel-active"),f.is(":animated")&&(f.stop(!0,!0),g.stop(!0,!0)),r?(n.css({left:o*d}).animate({left:0,opacity:1},s),f.animate({left:-o*d,opacity:0},s)):e.browser.version>6?(n.css({left:o*d,opacity:1}).animate({left:0},s),f.animate({left:-o*d},s)):(n.fadeIn(),f.fadeOut()),g=f,f=n,p=i,p>0?_.addClass("cq-carousel-active"):_.removeClass("cq-carousel-active"),p<l.length-1?m.addClass("cq-carousel-active"):m.removeClass("cq-carousel-active")),!1}).each(function(){var t=e(this);t.attr("title",t.text())}).filter(":first").addClass("cq-carousel-active"),t(),o.hover(function(){i(),_.fadeIn(),m.fadeIn()},function(){t(),_.fadeOut(),m.fadeOut()}),n(this)})}catch(i){t(i,"Could not initialize the banners")}}catch(i){t(i,"Init failed")}})}($CQ||$),function(e){var t,n,r=e.event;t=r.special.debouncedresize={setup:function(){e(this).on("resize",t.handler)},teardown:function(){e(this).off("resize",t.handler)},handler:function(e,i){var o=this,a=arguments,s=function(){e.type="debouncedresize",r.dispatch.apply(o,a)};n&&clearTimeout(n),i?s():n=setTimeout(s,t.threshold)},threshold:150}}($CQ),window.matchMedia=window.matchMedia||function(e,t){"use strict";var n,r=e.documentElement,i=r.firstElementChild||r.firstChild,o=e.createElement("body"),a=e.createElement("div");return a.id="mq-test-1",a.style.cssText="position:absolute;top:-100em",o.style.background="none",o.appendChild(a),function(e){return a.innerHTML='&shy;<style media="'+e+'"> #mq-test-1 { width: 42px; }</style>',r.insertBefore(o,i),n=42===a.offsetWidth,r.removeChild(o),{matches:n,media:e}}}(document),function(e,t){"use strict";t.picturefill=function(n){var r;n===r&&(n=e("body")),e("div[data-picture]",n).each(function(){var n=this,r=[];e("div[data-media]",n).each(function(){var n=e(this).attr("data-media");(!n||t.matchMedia&&t.matchMedia(n).matches)&&r.push(this)});var i=e("img",n).first();if(r.length){if(0===i.size()){var o=e(n);i=e("<img />").attr("alt",o.attr("data-alt")).appendTo(o)}i.attr("src",r.pop().getAttribute("data-src"))}else i.remove()})},e(function(){t.picturefill()}),e(t).on("debouncedresize",function(){t.picturefill()})}($CQ,this),window._g=window._g||{},_g.shared={},void 0===window.console&&(window.console={log:function(e){}}),_g.shared.HTTP=new function(){var e=function(){var e=new Object;return e.headers=new Object,e.body=new Object,e},t=function(t){if(!t)return null;var n=e();return n.body=t.responseText,n.headers[_g.HTTP.HEADER_STATUS]=t.status,n.responseText=t.responseText,n.status=t.status,n};return{EXTENSION_HTML:".html",EXTENSION_JSON:".json",EXTENSION_RES:".res",HEADER_STATUS:"Status",HEADER_MESSAGE:"Message",HEADER_LOCATION:"Location",HEADER_PATH:"Path",PARAM_NO_CACHE:"cq_ck",get:function(e,n,r,i){if(e=_g.HTTP.getXhrHookedURL(_g.HTTP.externalize(e,!0)),void 0!=n)return _g.$.ajax({type:"GET",url:e,externalize:!1,encodePath:!1,hook:!1,complete:function(e,o){var a=t(e);i||_g.HTTP.handleForbidden(a),n.call(r||this,this,"success"==o,a)}});try{var o=_g.$.ajax({type:"GET",url:e,async:!1,externalize:!1,encodePath:!1,hook:!1}),a=t(o);return i||_g.HTTP.handleForbidden(a),a}catch(s){return null}},post:function(e,t,n,r,i,o){e=_g.HTTP.externalize(e,!0);var a=_g.HTTP.getXhrHook(e,"POST",n);if(a&&(e=a.url,n=a.params),void 0!=t)return _g.$.ajax({type:"POST",url:e,data:n,externalize:!1,encodePath:!1,hook:!1,complete:function(e,n){var i=_g.HTTP.buildPostResponseFromHTML(e.responseText);o||_g.HTTP.handleForbidden(e),t.call(r||this,this,"success"==n,i)}});try{var s=_g.$.ajax({type:"POST",url:e,data:n,async:!1,externalize:!1,encodePath:!1,hook:!1}),c=_g.HTTP.buildPostResponseFromHTML(s.responseText);return o||_g.HTTP.handleForbidden(s),c}catch(l){return null}},getParameter:function(e,t){var n=_g.HTTP.getParameters(e,t);return null!=n?n[0]:null},getParameters:function(e,t){var n=[];if(!t)return null;if(t=encodeURIComponent(t),-1==e.indexOf("?"))return null;var r=e.substring(e.indexOf("?")+1);if(-1==r.indexOf(t))return null;for(var i=r.split("&"),o=0;o<i.length;o++){var a=i[o].split("=");a[0]==t&&n.push(a.length>1?decodeURIComponent(a[1]):"")}return n.length>0?n:null},addParameter:function(e,t,n){if(n&&n instanceof Array){for(var r=0;r<n.length;r++)e=_g.HTTP.addParameter(e,t,n[r]);return e}var i=-1==e.indexOf("?")?"?":"&",o=e.indexOf("#");if(0>o)return e+i+encodeURIComponent(t)+"="+encodeURIComponent(n);var a=e.substring(o);return e=e.substring(0,o),e+i+encodeURIComponent(t)+"="+encodeURIComponent(n)+a},setParameter:function(e,t,n){return e=_g.HTTP.removeParameter(e,t),_g.HTTP.addParameter(e,t,n)},removeParameter:function(e,t){var n,r="?"+encodeURIComponent(t)+"=",i="&"+encodeURIComponent(t)+"=";if(-1!=e.indexOf(r))n=r;else{if(-1==e.indexOf(i))return e;n=i}var o=e.indexOf(n),a=e.substring(0,o),s=e.indexOf("&",o+1),c="";return-1!=s&&(c=e.substring(s),0==c.indexOf("&")&&(c=c.replace("&","?"))),a+c},removeParameters:Granite.HTTP.removeParameters,addSelector:function(e,t,n){n||(n=0);var r="",i=e.indexOf("?");-1==i&&(i=e.indexOf("#")),-1!=i&&(r=e.substring(i),e=e.substring(0,i));var o=e.lastIndexOf("/"),a=e.substring(o);if(-1==a.indexOf("."+t+".")){var s=e.substring(0,o),c=a.split("."),l="",u="";(n>c.length-2||-1==n)&&(n=c.length-2);for(var d=0;d<c.length;d++)l+=u+c[d],u=".",n==d&&(l+=u+t);return s+l+r}return e},setSelector:function(e,t,n){var r="",i=e.indexOf("?");-1==i&&(i=e.indexOf("#")),-1!=i&&(r=e.substring(i),e=e.substring(0,i));var o=_g.HTTP.getSelectors(e),a=e.substring(e.lastIndexOf("."));e=e.substring(0,e.lastIndexOf("."));var s=o.length>0?e.replace("."+o.join("."),""):e;if(o.length>0)for(var c=0;c<o.length;c++)s+=n==c?"."+t:"."+o[c];else s+="."+t;return s+a+r},addSelectors:function(e,t){var n=e;if(e&&t&&t.length)for(var r=0;r<t.length;r++)n=_g.HTTP.addSelector(n,t[r],r);return n},getAnchor:function(e){return-1!=e.indexOf("#")?e.substring(e.indexOf("#")+1):""},setAnchor:function(e,t){return _g.HTTP.removeAnchor(e)+"#"+t},removeAnchor:Granite.HTTP.removeAnchor,noCaching:function(e){return _g.HTTP.setParameter(e,_g.HTTP.PARAM_NO_CACHE,(new Date).valueOf())},buildPostResponseFromNode:function(t,n){if(!t)return null;void 0==n&&(n=e());for(var r=0;r<t.childNodes.length;r++){var i=t.childNodes[r];i.tagName&&(i.id&&(i.href?n.headers[i.id]=i.href:n.headers[i.id]=i.innerHTML),n=_g.HTTP.buildPostResponseFromNode(i,n))}return n},buildPostResponseFromHTML:function(t){var n=e();try{void 0!=t.responseText?t=t.responseText:"string"!=typeof t&&(t=t.toString());var r=document.createElement("div");r.innerHTML=t,n=_g.HTTP.buildPostResponseFromNode(r,n),r=null}catch(i){}return n},getCookie:function(e){var t=encodeURIComponent(e)+"=",n=document.cookie;if(n.length>0){var r=n.indexOf(t);if(-1!=r){r+=t.length;var i=n.indexOf(";",r);return-1==i&&(i=n.length),decodeURIComponent(n.substring(r,i))}}return null},setCookie:function(e,t,n,r,i,o){"number"!=typeof r&&(r=7);var a;return r>0?(a=new Date,a.setTime(a.getTime()+24*r*60*60*1e3)):a=new Date(0),document.cookie=encodeURIComponent(e)+"="+encodeURIComponent(t)+"; "+(0!=r?"expires="+a.toGMTString()+"; ":"")+(i?"domain="+i+"; ":"")+(n?"path="+n:"")+(o?"; secure":""),t},clearCookie:function(e,t,n,r){_g.HTTP.setCookie(e,"null",t||"",-1,n||"",r||"")},getSchemeAndAuthority:Granite.HTTP.getSchemeAndAuthority,getContextPath:Granite.HTTP.getContextPath,externalize:function(e,t){return"undefined"!=typeof G_IS_HOOKED&&G_IS_HOOKED(e)?e:(t&&(e=_g.HTTP.encodePathOfURI(e)),e=Granite.HTTP.externalize(e))},internalize:Granite.HTTP.internalize,getPath:Granite.HTTP.getPath,getSuffix:function(){return window.CQURLInfo&&CQURLInfo.suffix?CQURLInfo.suffix:null},getSelectors:function(e){if(!e&&window.CQURLInfo&&CQURLInfo.selectors)return CQURLInfo.selectors;var t=[];e=e||window.location.href,e=_g.HTTP.removeParameters(e),e=_g.HTTP.removeAnchor(e);var n=e.substring(e.lastIndexOf("/"));if(n){var r=n.split(".");if(r.length>2)for(var i=0;i<r.length;i++)i>0&&i<r.length-1&&t.push(r[i])}return t},getExtension:function(e){if(!e&&window.CQURLInfo&&CQURLInfo.extension)return CQURLInfo.extension;e=e||window.location.href,e=_g.HTTP.removeParameters(e),e=_g.HTTP.removeAnchor(e);var t=e.lastIndexOf(".");return 0>t?"":(e=e.substring(t+1),t=e.indexOf("/"),0>t?e:e.substring(0,t))},encodePathOfURI:Granite.HTTP.encodePathOfURI,encodePath:Granite.HTTP.encodePath,eval:Granite.HTTP.eval,isOkStatus:function(e){try{return 0==new String(e).indexOf("2")}catch(t){return!1}},isOk:function(e){try{return _g.HTTP.isOkStatus(e.headers[_g.HTTP.HEADER_STATUS])}catch(t){return!1}},handleForbidden:function(e,t){try{return 403==e[_g.HTTP.HEADER_STATUS.toLowerCase()]?(Granite.HTTP.handleLoginRedirect(),!0):!1}catch(n){return!1}},getXhrHook:Granite.HTTP.getXhrHook,getXhrHookedURL:function(e,t,n){var r=_g.HTTP.getXhrHook(e,t,n);return r?r.url:e},reloadHook:function(e){return"undefined"!=typeof G_RELOAD_HOOK&&_g.$.isFunction(G_RELOAD_HOOK)&&(""!=CQURLInfo.selectorString&&(e=_g.HTTP.addSelector(e,CQURLInfo.selectorString)),e=G_RELOAD_HOOK(e)||e),e}}},_g.HTTP=_g.shared.HTTP,_g.shared.Util=new function(){return{reload:function(e,t,n){e||(e=window),t||(t=_g.HTTP.noCaching(e.location.href)),t=_g.HTTP.reloadHook(t),n?e.location.replace(t):e.location.href=t},load:function(e,t){_g.Util.reload(window,e,t)},open:function(e,t,n,r){return t||(t=window),e?(e=_g.HTTP.reloadHook(e),n||(n=""),r||(r=""),t.open(e,n,r)):void 0},htmlEncode:function(e){return e?String(e).replace(/&/g,"&amp;").replace(/>/g,"&gt;").replace(/</g,"&lt;").replace(/"/g,"&quot;"):e},htmlDecode:function(e){return e?String(e).replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&quot;/g,'"').replace(/&amp;/g,"&"):e},ellipsis:function(e,t,n){if(e&&e.length>t){if(n){var r=e.substr(0,t-2),i=Math.max(r.lastIndexOf(" "),r.lastIndexOf("."),r.lastIndexOf("!"),r.lastIndexOf("?"),r.lastIndexOf(";"));return-1==i||t-15>i?e.substr(0,t-3)+"...":r.substr(0,i)+"..."}return e.substr(0,t-3)+"..."}return e},patchText:Granite.Util.patchText,eval:function(e){return _g.HTTP.eval(e)},getTopWindow:Granite.Util.getTopWindow,setIFrameMode:Granite.Util.setIFrameMode}},_g.Util=_g.shared.Util,_g.shared.Sling=function(){return{SELECTOR_INFINITY:Granite.Sling.SELECTOR_INFINITY,CHARSET:Granite.Sling.CHARSET,STATUS:Granite.Sling.STATUS,STATUS_BROWSER:Granite.Sling.STATUS_BROWSER,OPERATION:Granite.Sling.OPERATION,OPERATION_DELETE:Granite.Sling.OPERATION_DELETE,OPERATION_MOVE:Granite.Sling.OPERATION_MOVE,DELETE_SUFFIX:Granite.Sling.DELETE_SUFFIX,TYPEHINT_SUFFIX:Granite.Sling.TYPEHINT_SUFFIX,COPY_SUFFIX:Granite.Sling.COPY_SUFFIX,MOVE_SUFFIX:Granite.Sling.MOVE_SUFFIX,ORDER:Granite.Sling.ORDER,REPLACE:Granite.Sling.REPLACE,DESTINATION:Granite.Sling.DESTINATION,SAVE_PARAM_PREFIX:Granite.Sling.SAVE_PARAM_PREFIX,IGNORE_PARAM:Granite.Sling.IGNORE_PARAM,REQUEST_LOGIN_PARAM:Granite.Sling.REQUEST_LOGIN_PARAM,LOGIN_URL:Granite.Sling.LOGIN_URL,LOGOUT_URL:Granite.Sling.LOGOUT_URL,processBinaryData:function(e){if(e&&void 0!=e[":jcr:data"]){var t=new Object;t.size=e[":jcr:data"],t.type=e["jcr:mimeType"],t.date=e["jcr:lastModified"],e=t}return e},getContentPath:function(e,t,n){var r=t;if(r.lastIndexOf(".")>r.lastIndexOf("/")&&(r=r.substr(0,r.indexOf(".",r.lastIndexOf("/")))),e)if(0==e.indexOf("/"))r=e;else{if(n)for(;0==e.indexOf("../");)e=e.substring(3),r=r.substring(0,r.lastIndexOf("/"));e=e.replace("./",""),r=r+"/"+e}return r}}}(),_g.Sling=_g.shared.Sling,_g.shared.XSS=new function(){return{getXSSPropertyName:function(e){return e?_g.XSS.KEY_REGEXP.test(e)?e:e+=_g.XSS.KEY_SUFFIX:""},getXSSRecordPropertyValue:function(e,t,n){var r="";if(e&&t){var i=e.get(this.getXSSPropertyName(t));r=i?i:e.get(t),n&&!isNaN(n)&&(r=_g.Util.ellipsis(r,n,!0))}return r},getXSSTablePropertyValue:function(e,t,n){var r="";if(e&&t){var i=e[this.getXSSPropertyName(t)];r=i?i:e[t],n&&!isNaN(n)&&(r=_g.Util.ellipsis(r,n,!0))}return r},getXSSValue:function(e){return e?_g.Util.htmlEncode(e):""},updatePropertyName:function(e,t){e&&t&&e[t]&&e.xssProtect&&!e.xssKeepPropName&&(e[t]=this.getXSSPropertyName(e[t]))},xssPropertyRenderer:function(e,t,n,r){return r&&r.dataIndex&&n&&n.data&&n.data[this.getXSSPropertyName(r.dataIndex)]?(e=n.data[this.getXSSPropertyName(r.dataIndex)],r.ellipsisLimit&&!isNaN(r.ellipsisLimit)&&(e=_g.Util.ellipsis(e,r.ellipsisLimit,!0)),e):e?e:""}}},_g.XSS=_g.shared.XSS,_g.XSS.KEY_SUFFIX="_xss",_g.XSS.KEY_REGEXP=new RegExp(_g.XSS.KEY_SUFFIX+"$"),_g.shared.I18n=Granite.I18n,_g.I18n=_g.shared.I18n,_g.shared.I18n.getMessage=Granite.I18n.get,_g.shared.I18n.getVarMessage=Granite.I18n.getVar,_g.shared.String=new function(){return{startsWith:function(e,t){if(null==e||null==t)return null==e&&null==t;if(t.length>e.length)return!1;var n=e.toString(),r=t.toString();return 0==n.indexOf(r)},endsWith:function(e,t){return null==e||null==t?null==e&&null==t:t.length>e.length?!1:(e=e.toString(),t=t.toString(),e.lastIndexOf(t)==e.length-t.length)},contains:function(e,t){return null==e||null==t?!1:(e=e.toString(),t=t.toString(),e.indexOf(t)>=0)}}},_g.String=_g.shared.String,_g.shared.ClientSidePersistence=function(e){var t={PERSISTENCE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("ClientSidePersistence"),config:{},cache:null,getMode:function(){return this.config.mode},getWindow:function(){return this.config.window||_g.shared.Util.getTopWindow()},debug:function(){if(console){for(var e=this.getMap(),t="[ClientSidePersistence -> mode="+this.getMode().name+", container="+(this.config.container||"")+"]\n",n=0,r=new RegExp("^"+this.config.container+"/"),i=0,o=Object.keys(e).sort();i<o.length;i++){var a=o[i];if(!this.config.container||"string"!=typeof a||a.match(r)){var s=e[a];t+="-["+ ++n+"]-> '"+a.replace(r,"")+"' = '"+decodeURIComponent(s)+"'\n"}}n||(t+="(container is empty)"),console.log(t)}},keyName:function(e){return(this.config.container?this.config.container+"/":"")+e},getKeys:function(){var e=this.getMap(),t=[];if(e)for(var n in e)if(this.config.container){if(0==n.indexOf(this.config.container+"/")){var r=n.substring(this.config.container.length+1);t.push(r)}}else t.push(n);return t},get:function(e){var t=this.getMap()[this.keyName(e)];return t?decodeURIComponent(t):t},set:function(e,t){e="string"==typeof e?e.replace(/:=/g,""):"";var n={key:e};if(e=this.keyName(e),e.length){var r=[],i=this.getMap();n.action=i[e]?"update":"set",t?i[e]=encodeURIComponent(t):(n.action="remove",delete i[e]);for(var o in i)r.push(o+":="+i[o]);this.cache=i,this.write(r.join("|")),_g.$.extend(n,{value:t,mode:this.getMode().name,container:this.config.container}),_g.$(_g.shared.ClientSidePersistence).trigger(_g.shared.ClientSidePersistence.EVENT_NAME,n)}},getMap:function(){if(!this.cache||!this.config.useCache){for(var e=this.read().split("|"),t={},n=0;n<e.length;n++){var r=e[n].split(":="),i=r[0];i&&i.length&&(t[i]=r[1]||"")}this.cache=t}return this.cache},remove:function(e){this.set(e)},clearMap:function(){this.write()},read:function(){return this.config.mode.read(this)||""},write:function(e){this.config.mode.write(this,e||"")}};return _g.$.extend(t.config,_g.shared.ClientSidePersistence.getDefaultConfig(),e),t.config.useContainer===!1&&(t.config.container=null),t.config.mode!==_g.shared.ClientSidePersistence.MODE_SESSION||window.sessionStorage&&window.sessionStorage.getItem&&window.sessionStorage.setItem||(t.config.mode=_g.shared.ClientSidePersistence.MODE_LOCAL),t.config.mode!==_g.shared.ClientSidePersistence.MODE_LOCAL||window.localStorage&&window.localStorage.getItem&&window.localStorage.setItem||(t.config.mode=_g.shared.ClientSidePersistence.MODE_WINDOW),t},_g.shared.ClientSidePersistence.EVENT_NAME="ClientSidePersistence",_g.shared.ClientSidePersistence.MODE_SESSION={name:"session",read:function(e){return e.getWindow().sessionStorage.getItem(e.PERSISTENCE_NAME)},write:function(e,t){Granite.OptOutUtil.isOptedOut()||e.getWindow().sessionStorage.setItem(e.PERSISTENCE_NAME,t)}},_g.shared.ClientSidePersistence.MODE_LOCAL={name:"local",read:function(e){return e.getWindow().localStorage.getItem(e.PERSISTENCE_NAME)},write:function(e,t){Granite.OptOutUtil.isOptedOut()||e.getWindow().localStorage.setItem(e.PERSISTENCE_NAME,t)}},_g.shared.ClientSidePersistence.decoratePersistenceName=function(e){return e},_g.shared.ClientSidePersistence.MODE_WINDOW={name:"window",read:function(e){return e.getWindow().name},write:function(e,t){Granite.OptOutUtil.isOptedOut()||(e.getWindow().name=t)}},_g.shared.ClientSidePersistence.MODE_COOKIE={COOKIE_NAME:_g.shared.ClientSidePersistence.decoratePersistenceName("SessionPersistence"),name:"cookie",read:function(e){return _g.shared.ClientSidePersistence.CookieHelper.read(this.COOKIE_NAME)},write:function(e,t){(!Granite.OptOutUtil.isOptedOut()||Granite.OptOutUtil.maySetCookie(this.COOKIE_NAME))&&(t?_g.shared.ClientSidePersistence.CookieHelper.set(this.COOKIE_NAME,t,365):_g.shared.ClientSidePersistence.CookieHelper.erase(this.COOKIE_NAME))}},_g.shared.ClientSidePersistence.getDefaultConfig=function(){return{window:_g.shared.Util.getTopWindow(),useCache:!1,container:null,mode:_g.shared.ClientSidePersistence.MODE_LOCAL}},_g.shared.ClientSidePersistence.CookieHelper={set:function(e,t,n){var r="";if(n){var i=new Date;i.setTime(i.getTime()+24*n*60*60*1e3),r="; expires="+i.toGMTString()}t&&(t=encodeURIComponent(t)),document.cookie=e+"="+t+r+"; path=/"},read:function(e){for(var t=e+"=",n=document.cookie.split(";"),r=0;r<n.length;r++){for(var i=n[r];" "==i.charAt(0);)i=i.substring(1,i.length);if(0==i.indexOf(t)){var o=i.substring(t.length,i.length);return o?decodeURIComponent(o):null}}return null},erase:function(e){_g.shared.ClientSidePersistence.CookieHelper.set(e,"",-1)}},_g.shared.ClientSidePersistence.clearAllMaps=function(){var e=[_g.shared.ClientSidePersistence.MODE_COOKIE,_g.shared.ClientSidePersistence.MODE_LOCAL,_g.shared.ClientSidePersistence.MODE_SESSION,_g.shared.ClientSidePersistence.MODE_WINDOW];_g.$.each(e,function(e,t){var n=new _g.shared.ClientSidePersistence({mode:t});n.clearMap()})},_g.I18n.init(),window.CQ=window.CQ||{},CQ.shared=_g.shared,CQ.Sling=CQ.shared.Sling,CQ.I18n=CQ.shared.I18n,G_XHR_HOOK="undefined"!=typeof CQ_XHR_HOOK?CQ_XHR_HOOK:void 0,G_RELOAD_HOOK="undefined"!=typeof CQ_RELOAD_HOOK?CQ_RELOAD_HOOK:void 0,G_IS_HOOKED="undefined"!=typeof CQ_IS_HOOKED?CQ_IS_HOOKED:void 0,G_CONTENT_PATH="undefined"!=typeof CQ_CONTENT_PATH?CQ_CONTENT_PATH:void 0,CQ.shared.Form=function(){var e=function(){for(var e=new Object,t=document.getElementsByTagName("label"),n=0;n<t.length;n++){var r=t[n].htmlFor;r&&(e[r]=t[n])}return e},t=function(e){var t="",n=function(e){if(3==e.nodeType&&(t+=e.nodeValue),"select"!=e.nodeName.toLowerCase()&&"input"!=e.nodeName.toLowerCase()&&"textarea"!=e.nodeName.toLowerCase()&&"button"!=e.nodeName.toLowerCase())for(var r=0;e.childNodes&&r<e.childNodes.length;r++)n(e.childNodes[r])};return n(e),t},n=function(e){return e.replace(/-\d+$/,"")},r=function(n,r){return r||(r=e()),r[n]?t(r[n]):null},i=function(e){var t,n=e.nodeName.toLowerCase(),r=o(e,"type")?e.getAttribute("type"):void 0;return"input"==n?"radio"==r||"checkbox"==r?o(e,"checked")&&(t=e.getAttribute("value")):t="text"==e.type?e.defaultValue:e.value:"textarea"==n?t=e.value:"option"==n&&o(e,"selected")&&(t=e.getAttribute("value")),t},o=function(e,t){return null==e?!1:void 0!=$CQ(e).attr(t)};return{searchArray:function(e,t,n){for(var r=0;r<e.length;r++)if(e[r][t]&&e[r][t]==n)return e[r];return null},getLabelForField:function(n,r){r||(r=e());var i=n.getAttribute("id");if(i&&r[i])return t(r[i]);for(var o=n.parentNode;o;){if("label"==o.nodeName.toLowerCase())return t(o);o=o.parentNode}return n.getAttribute("name")},getFields:function(){var t=e(),a=[],s=function(e,s){var c,l=e.getAttribute("name"),u=e.nodeName.toLowerCase();if("input"==u||"textarea"==u){var d=o(e,"type")?e.getAttribute("type").toLowerCase():"text";if("button"==d||"submit"==d||"reset"==d)return;if(c=CQ.shared.Form.searchArray(a,"value",l),c||(a.push({text:CQ.shared.Form.getLabelForField(e,t),value:l,name:l,enumeration:void 0,local:s,type:u,defaultValue:i(e),node:e}),c=a[a.length-1]),"radio"==d||c.local&&"checkbox"==d){if(!c.enumeration){var f=e.getAttribute("id");if(f){var g=n(f),h=r(g,t);c.text=h?h:l}else c.text=l;c.enumeration=[]}c.enumeration.push({text:CQ.shared.Form.getLabelForField(e,t),value:e.getAttribute("value"),defaultValue:i(e),node:e})}}else if("select"==u){a.push({text:CQ.shared.Form.getLabelForField(e,t),value:l,name:l,enumeration:[],local:s,type:u,defaultValue:void 0,node:e}),c=a[a.length-1];for(var p=e.getElementsByTagName("option"),_=0;_<p.length;_++)c.enumeration.push({text:p[_].innerHTML,value:p[_].getAttribute("value"),defaultValue:i(p[_]),node:p[_]})}},c=function(e,t){"div"==e.nodeName.toLowerCase()&&$CQ(e).hasClass("section")&&(t=!0),e.getAttribute&&e.getAttribute("name")&&s(e,t);for(var n=0;e.childNodes&&n<e.childNodes.length;n++){var r=e.childNodes[n];1==r.nodeType&&c(r,t)}};return c(document,!1),a}}}(),CQ.shared.User=function(e){return{data:null,language:null,userPropsPath:null,getUserPropsUrl:function(){return this.userPropsPath||(this.userPropsPath=CQ.shared.User.PROXY_URI),this.userPropsPath},load:function(){var e=this.getUserPropsUrl();e=CQ.shared.HTTP.noCaching(e);var t=CQ.shared.HTTP.get(e);CQ.shared.HTTP.isOk(t)&&(this.data=CQ.shared.Util.eval(t))},init:function(e,t){return(!this.initialized||t)&&(e?this.data=e:this.load(),this.initialized=!0),this.data},lazyInit:function(){this.lazyLoad=function(){this.load(),this.initialized=!0}},isInitialized:function(){return this.initialized},getLanguage:function(){return!this.isInitialized()&&this.lazyLoad&&this.lazyLoad.call(this),this.language=this.data&&this.data.preferences&&this.data.preferences.language?this.data.preferences.language:"en",this.language}}}(),CQ.shared.User.PROXY_URI=CQ.shared.HTTP.externalize("/libs/cq/security/userinfo"+CQ.shared.HTTP.EXTENSION_JSON),
CQ.shared.User.lazyInit(),CQ.shared.I18n.init({locale:function(){return CQ.shared.User.getLanguage()},urlPrefix:"/libs/cq/i18n/dict."}),$(document).ready(function(){$("#content").length&&$(".skip-links").append('<a href="#content">Skip to Main Content</a>'),$("#content-primary").length&&$(".skip-links").append('<a href="#content-primary">Skip to Main Content</a>')});
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){function n(e){return u.raw?e:encodeURIComponent(e)}function o(e){return u.raw?e:decodeURIComponent(e)}function i(e){return n(u.json?JSON.stringify(e):String(e))}function r(e){0===e.indexOf('"')&&(e=e.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return e=decodeURIComponent(e.replace(c," ")),u.json?JSON.parse(e):e}catch(n){}}function t(n,o){var i=u.raw?n:r(n);return e.isFunction(o)?o(i):i}var c=/\+/g,u=e.cookie=function(r,c,a){if(arguments.length>1&&!e.isFunction(c)){if(a=e.extend({},u.defaults,a),"number"==typeof a.expires){var f=a.expires,s=a.expires=new Date;s.setTime(+s+864e5*f)}return document.cookie=[n(r),"=",i(c),a.expires?"; expires="+a.expires.toUTCString():"",a.path?"; path="+a.path:"",a.domain?"; domain="+a.domain:"",a.secure?"; secure":""].join("")}for(var d=r?void 0:{},p=document.cookie?document.cookie.split("; "):[],m=0,x=p.length;x>m;m++){var l=p[m].split("="),g=o(l.shift()),k=l.join("=");if(r&&r===g){d=t(k,c);break}r||void 0===(k=t(k))||(d[g]=k)}return d};u.defaults={},e.removeCookie=function(n,o){return void 0===e.cookie(n)?!1:(e.cookie(n,"",e.extend({},o,{expires:-1})),!e.cookie(n))}});
window.Modernizr=function(e,t,n){function r(e){b.cssText=e}function o(e,t){return r(j.join(e+";")+(t||""))}function i(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function c(e,t){for(var r in e){var o=e[r];if(!a(o,"-")&&b[o]!==n)return"pfx"==t?o:!0}return!1}function l(e,t,r){for(var o in e){var a=t[e[o]];if(a!==n)return r===!1?e[o]:i(a,"function")?a.bind(r||t):a}return!1}function s(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),o=(e+" "+x.join(r+" ")+r).split(" ");return i(t,"string")||i(t,"undefined")?c(o,t):(o=(e+" "+w.join(r+" ")+r).split(" "),l(o,t,n))}function u(){m.input=function(n){for(var r=0,o=n.length;o>r;r++)F[n[r]]=n[r]in E;return F.list&&(F.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),F}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" "))}var f,p,d="2.8.3",m={},h=!0,y=t.documentElement,g="modernizr",v=t.createElement(g),b=v.style,E=t.createElement("input"),j=({}.toString," -webkit- -moz- -o- -ms- ".split(" ")),S="Webkit Moz O ms",x=S.split(" "),w=S.toLowerCase().split(" "),C={},F={},N=[],M=N.slice,O={}.hasOwnProperty;p=i(O,"undefined")||i(O.call,"undefined")?function(e,t){return t in e&&i(e.constructor.prototype[t],"undefined")}:function(e,t){return O.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=M.call(arguments,1),r=function(){if(this instanceof r){var o=function(){};o.prototype=t.prototype;var i=new o,a=t.apply(i,n.concat(M.call(arguments)));return Object(a)===a?a:i}return t.apply(e,n.concat(M.call(arguments)))};return r}),C.boxshadow=function(){return s("boxShadow")},C.opacity=function(){return o("opacity:.55"),/^0.55$/.test(b.opacity)};for(var T in C)p(C,T)&&(f=T.toLowerCase(),m[f]=C[T](),N.push((m[f]?"":"no-")+f));return m.input||u(),m.addTest=function(e,t){if("object"==typeof e)for(var r in e)p(e,r)&&m.addTest(r,e[r]);else{if(e=e.toLowerCase(),m[e]!==n)return m;t="function"==typeof t?t():t,"undefined"!=typeof h&&h&&(y.className+=" "+(t?"":"no-")+e),m[e]=t}return m},r(""),v=E=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function o(e){var t=g[e[h]];return t||(t={},y++,e[h]=y,g[y]=t),t}function i(e,n,r){if(n||(n=t),u)return n.createElement(e);r||(r=o(n));var i;return i=r.cache[e]?r.cache[e].cloneNode():m.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!i.canHaveChildren||d.test(e)||i.tagUrn?i:r.frag.appendChild(i)}function a(e,n){if(e||(e=t),u)return e.createDocumentFragment();n=n||o(e);for(var i=n.frag.cloneNode(),a=0,c=r(),l=c.length;l>a;a++)i.createElement(c[a]);return i}function c(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?i(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var r=o(e);return v.shivCSS&&!s&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),u||c(e,r),e}var s,u,f="3.7.0",p=e.html5||{},d=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,m=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",y=0,g={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",s="hidden"in e,u=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return"undefined"==typeof e.cloneNode||"undefined"==typeof e.createDocumentFragment||"undefined"==typeof e.createElement}()}catch(n){s=!0,u=!0}}();var v={elements:p.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:f,shivCSS:p.shivCSS!==!1,supportsUnknownElements:u,shivMethods:p.shivMethods!==!1,type:"default",shivDocument:l,createElement:i,createDocumentFragment:a};e.html5=v,l(t)}(this,t),m._version=d,m._prefixes=j,m._domPrefixes=w,m._cssomPrefixes=x,m.testProp=function(e){return c([e])},m.testAllProps=s,y.className=y.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+(h?" js "+N.join(" "):""),m}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==y.call(e)}function o(e){return"string"==typeof e}function i(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function c(){var e=g.shift();v=1,e?e.t?m(function(){("c"==e.t?p.injectCss:p.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),c()):v=0}function l(e,n,r,o,i,l,s){function u(t){if(!d&&a(f.readyState)&&(b.r=d=1,!v&&c(),f.onload=f.onreadystatechange=null,t)){"img"!=e&&m(function(){j.removeChild(f)},50);for(var r in F[n])F[n].hasOwnProperty(r)&&F[n][r].onload()}}var s=s||p.errorTimeout,f=t.createElement(e),d=0,y=0,b={t:r,s:n,e:i,a:l,x:s};1===F[n]&&(y=1,F[n]=[]),"object"==e?f.data=n:(f.src=n,f.type=e),f.width=f.height="0",f.onerror=f.onload=f.onreadystatechange=function(){u.call(this,y)},g.splice(o,0,b),"img"!=e&&(y||2===F[n]?(j.insertBefore(f,E?null:h),m(u,s)):F[n].push(f))}function s(e,t,n,r,i){return v=0,t=t||"j",o(e)?l("c"==t?x:S,e,t,this.i++,n,r,i):(g.splice(this.i++,0,e),1==g.length&&c()),this}function u(){var e=p;return e.loader={load:s,i:0},e}var f,p,d=t.documentElement,m=e.setTimeout,h=t.getElementsByTagName("script")[0],y={}.toString,g=[],v=0,b="MozAppearance"in d.style,E=b&&!!t.createRange().compareNode,j=E?d:h.parentNode,d=e.opera&&"[object Opera]"==y.call(e.opera),d=!!t.attachEvent&&!d,S=b?"object":d?"script":"img",x=d?"script":S,w=Array.isArray||function(e){return"[object Array]"==y.call(e)},C=[],F={},N={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};p=function(e){function t(e){var t,n,r,e=e.split("!"),o=C.length,i=e.pop(),a=e.length,i={url:i,origUrl:i,prefixes:e};for(n=0;a>n;n++)r=e[n].split("="),(t=N[r.shift()])&&(i=t(i,r));for(n=0;o>n;n++)i=C[n](i);return i}function a(e,o,i,a,c){var l=t(e),s=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(o&&(o=r(o)?o:o[e]||o[a]||o[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,o,i,a,c):(F[l.url]?l.noexec=!0:F[l.url]=1,i.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(o)||r(s))&&i.load(function(){u(),o&&o(l.origUrl,c,a),s&&s(l.origUrl,c,a),F[l.url]=2})))}function c(e,t){function n(e,n){if(e){if(o(e))n||(f=function(){var e=[].slice.call(arguments);p.apply(this,e),d()}),a(e,f,t,0,s);else if(Object(e)===e)for(l in c=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--c&&(r(f)?f=function(){var e=[].slice.call(arguments);p.apply(this,e),d()}:f[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),d()}}(p[l])),a(e[l],f,t,l,s))}else!n&&d()}var c,l,s=!!e.test,u=e.load||e.both,f=e.callback||i,p=f,d=e.complete||i;n(s?e.yep:e.nope,!!u),u&&n(u)}var l,s,f=this.yepnope.loader;if(o(e))a(e,0,f,0);else if(w(e))for(l=0;l<e.length;l++)s=e[l],o(s)?a(s,0,f,0):w(s)?p(s):Object(s)===s&&c(s,f);else Object(e)===e&&c(e,f)},p.addPrefix=function(e,t){N[e]=t},p.addFilter=function(e){C.push(e)},p.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",f=function(){t.removeEventListener("DOMContentLoaded",f,0),t.readyState="complete"},0)),e.yepnope=u(),e.yepnope.executeStack=c,e.yepnope.injectJs=function(e,n,r,o,l,s){var u,f,d=t.createElement("script"),o=o||p.errorTimeout;d.src=e;for(f in r)d.setAttribute(f,r[f]);n=s?c:n||i,d.onreadystatechange=d.onload=function(){!u&&a(d.readyState)&&(u=1,n(),d.onload=d.onreadystatechange=null)},m(function(){u||(u=1,n(1))},o),l?d.onload():h.parentNode.insertBefore(d,h)},e.yepnope.injectCss=function(e,n,r,o,a,l){var s,o=t.createElement("link"),n=l?c:n||i;o.href=e,o.rel="stylesheet",o.type="text/css";for(s in r)o.setAttribute(s,r[s]);a||(h.parentNode.insertBefore(o,h),m(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))};
(function(){function n(t,r,e){if(t===r)return 0!==t||1/t==1/r;if(null==t||null==r)return t===r;if(t._chain&&(t=t._wrapped),r._chain&&(r=r._wrapped),t.isEqual&&A.isFunction(t.isEqual))return t.isEqual(r);if(r.isEqual&&A.isFunction(r.isEqual))return r.isEqual(t);var u=l.call(t);if(u!=l.call(r))return!1;switch(u){case"[object String]":return t==String(r);case"[object Number]":return t!=+t?r!=+r:0==t?1/t==1/r:t==+r;case"[object Date]":case"[object Boolean]":return+t==+r;case"[object RegExp]":return t.source==r.source&&t.global==r.global&&t.multiline==r.multiline&&t.ignoreCase==r.ignoreCase}if("object"!=typeof t||"object"!=typeof r)return!1;for(var i=e.length;i--;)if(e[i]==t)return!0;e.push(t);var a=0,c=!0;if("[object Array]"==u){if(a=t.length,c=a==r.length)for(;a--&&(c=a in t==a in r&&n(t[a],r[a],e)););}else{if("constructor"in t!="constructor"in r||t.constructor!=r.constructor)return!1;for(var o in t)if(A.has(t,o)&&(a++,!(c=A.has(r,o)&&n(t[o],r[o],e))))break;if(c){for(o in r)if(A.has(r,o)&&!a--)break;c=!a}}return e.pop(),c}var t=this,r=t._,e={},u=Array.prototype,i=Object.prototype,a=Function.prototype,c=u.slice,o=u.unshift,l=i.toString,f=i.hasOwnProperty,s=u.forEach,p=u.map,h=u.reduce,v=u.reduceRight,g=u.filter,d=u.every,m=u.some,y=u.indexOf,b=u.lastIndexOf,x=Array.isArray,j=Object.keys,_=a.bind,A=function(n){return new N(n)};"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=A),exports._=A):t._=A,A.VERSION="1.3.3";var w=A.each=A.forEach=function(n,t,r){if(null!=n)if(s&&n.forEach===s)n.forEach(t,r);else if(n.length===+n.length){for(var u=0,i=n.length;i>u;u++)if(u in n&&t.call(r,n[u],u,n)===e)return}else for(var a in n)if(A.has(n,a)&&t.call(r,n[a],a,n)===e)return};A.map=A.collect=function(n,t,r){var e=[];return null==n?e:p&&n.map===p?n.map(t,r):(w(n,function(n,u,i){e[e.length]=t.call(r,n,u,i)}),n.length===+n.length&&(e.length=n.length),e)},A.reduce=A.foldl=A.inject=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),h&&n.reduce===h)return e&&(t=A.bind(t,e)),u?n.reduce(t,r):n.reduce(t);if(w(n,function(n,i,a){u?r=t.call(e,r,n,i,a):(r=n,u=!0)}),!u)throw new TypeError("Reduce of empty array with no initial value");return r},A.reduceRight=A.foldr=function(n,t,r,e){var u=arguments.length>2;if(null==n&&(n=[]),v&&n.reduceRight===v)return e&&(t=A.bind(t,e)),u?n.reduceRight(t,r):n.reduceRight(t);var i=A.toArray(n).reverse();return e&&!u&&(t=A.bind(t,e)),u?A.reduce(i,t,r,e):A.reduce(i,t)},A.find=A.detect=function(n,t,r){var e;return E(n,function(n,u,i){return t.call(r,n,u,i)?(e=n,!0):void 0}),e},A.filter=A.select=function(n,t,r){var e=[];return null==n?e:g&&n.filter===g?n.filter(t,r):(w(n,function(n,u,i){t.call(r,n,u,i)&&(e[e.length]=n)}),e)},A.reject=function(n,t,r){var e=[];return null==n?e:(w(n,function(n,u,i){t.call(r,n,u,i)||(e[e.length]=n)}),e)},A.every=A.all=function(n,t,r){var u=!0;return null==n?u:d&&n.every===d?n.every(t,r):(w(n,function(n,i,a){return(u=u&&t.call(r,n,i,a))?void 0:e}),!!u)};var E=A.some=A.any=function(n,t,r){t||(t=A.identity);var u=!1;return null==n?u:m&&n.some===m?n.some(t,r):(w(n,function(n,i,a){return u||(u=t.call(r,n,i,a))?e:void 0}),!!u)};A.include=A.contains=function(n,t){var r=!1;return null==n?r:y&&n.indexOf===y?-1!=n.indexOf(t):r=E(n,function(n){return n===t})},A.invoke=function(n,t){var r=c.call(arguments,2);return A.map(n,function(n){return(A.isFunction(t)?t||n:n[t]).apply(n,r)})},A.pluck=function(n,t){return A.map(n,function(n){return n[t]})},A.max=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0])return Math.max.apply(Math,n);if(!t&&A.isEmpty(n))return-(1/0);var e={computed:-(1/0)};return w(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a>=e.computed&&(e={value:n,computed:a})}),e.value},A.min=function(n,t,r){if(!t&&A.isArray(n)&&n[0]===+n[0])return Math.min.apply(Math,n);if(!t&&A.isEmpty(n))return 1/0;var e={computed:1/0};return w(n,function(n,u,i){var a=t?t.call(r,n,u,i):n;a<e.computed&&(e={value:n,computed:a})}),e.value},A.shuffle=function(n){var t,r=[];return w(n,function(n,e,u){t=Math.floor(Math.random()*(e+1)),r[e]=r[t],r[t]=n}),r},A.sortBy=function(n,t,r){var e=A.isFunction(t)?t:function(n){return n[t]};return A.pluck(A.map(n,function(n,t,u){return{value:n,criteria:e.call(r,n,t,u)}}).sort(function(n,t){var r=n.criteria,e=t.criteria;return void 0===r?1:void 0===e?-1:e>r?-1:r>e?1:0}),"value")},A.groupBy=function(n,t){var r={},e=A.isFunction(t)?t:function(n){return n[t]};return w(n,function(n,t){var u=e(n,t);(r[u]||(r[u]=[])).push(n)}),r},A.sortedIndex=function(n,t,r){r||(r=A.identity);for(var e=0,u=n.length;u>e;){var i=e+u>>1;r(n[i])<r(t)?e=i+1:u=i}return e},A.toArray=function(n){return n?A.isArray(n)?c.call(n):A.isArguments(n)?c.call(n):n.toArray&&A.isFunction(n.toArray)?n.toArray():A.values(n):[]},A.size=function(n){return A.isArray(n)?n.length:A.keys(n).length},A.first=A.head=A.take=function(n,t,r){return null==t||r?n[0]:c.call(n,0,t)},A.initial=function(n,t,r){return c.call(n,0,n.length-(null==t||r?1:t))},A.last=function(n,t,r){return null==t||r?n[n.length-1]:c.call(n,Math.max(n.length-t,0))},A.rest=A.tail=function(n,t,r){return c.call(n,null==t||r?1:t)},A.compact=function(n){return A.filter(n,function(n){return!!n})},A.flatten=function(n,t){return A.reduce(n,function(n,r){return A.isArray(r)?n.concat(t?r:A.flatten(r)):(n[n.length]=r,n)},[])},A.without=function(n){return A.difference(n,c.call(arguments,1))},A.uniq=A.unique=function(n,t,r){var e=r?A.map(n,r):n,u=[];return n.length<3&&(t=!0),A.reduce(e,function(r,e,i){return(t?A.last(r)===e&&r.length:A.include(r,e))||(r.push(e),u.push(n[i])),r},[]),u},A.union=function(){return A.uniq(A.flatten(arguments,!0))},A.intersection=A.intersect=function(n){var t=c.call(arguments,1);return A.filter(A.uniq(n),function(n){return A.every(t,function(t){return A.indexOf(t,n)>=0})})},A.difference=function(n){var t=A.flatten(c.call(arguments,1),!0);return A.filter(n,function(n){return!A.include(t,n)})},A.zip=function(){for(var n=c.call(arguments),t=A.max(A.pluck(n,"length")),r=new Array(t),e=0;t>e;e++)r[e]=A.pluck(n,""+e);return r},A.indexOf=function(n,t,r){if(null==n)return-1;var e,u;if(r)return e=A.sortedIndex(n,t),n[e]===t?e:-1;if(y&&n.indexOf===y)return n.indexOf(t);for(e=0,u=n.length;u>e;e++)if(e in n&&n[e]===t)return e;return-1},A.lastIndexOf=function(n,t){if(null==n)return-1;if(b&&n.lastIndexOf===b)return n.lastIndexOf(t);for(var r=n.length;r--;)if(r in n&&n[r]===t)return r;return-1},A.range=function(n,t,r){arguments.length<=1&&(t=n||0,n=0),r=arguments[2]||1;for(var e=Math.max(Math.ceil((t-n)/r),0),u=0,i=new Array(e);e>u;)i[u++]=n,n+=r;return i};var O=function(){};A.bind=function(n,t){var r,e;if(n.bind===_&&_)return _.apply(n,c.call(arguments,1));if(!A.isFunction(n))throw new TypeError;return e=c.call(arguments,2),r=function(){if(!(this instanceof r))return n.apply(t,e.concat(c.call(arguments)));O.prototype=n.prototype;var u=new O,i=n.apply(u,e.concat(c.call(arguments)));return Object(i)===i?i:u}},A.bindAll=function(n){var t=c.call(arguments,1);return 0==t.length&&(t=A.functions(n)),w(t,function(t){n[t]=A.bind(n[t],n)}),n},A.memoize=function(n,t){var r={};return t||(t=A.identity),function(){var e=t.apply(this,arguments);return A.has(r,e)?r[e]:r[e]=n.apply(this,arguments)}},A.delay=function(n,t){var r=c.call(arguments,2);return setTimeout(function(){return n.apply(null,r)},t)},A.defer=function(n){return A.delay.apply(A,[n,1].concat(c.call(arguments,1)))},A.throttle=function(n,t){var r,e,u,i,a,c,o=A.debounce(function(){a=i=!1},t);return function(){r=this,e=arguments;var l=function(){u=null,a&&n.apply(r,e),o()};return u||(u=setTimeout(l,t)),i?a=!0:c=n.apply(r,e),o(),i=!0,c}},A.debounce=function(n,t,r){var e;return function(){var u=this,i=arguments,a=function(){e=null,r||n.apply(u,i)};r&&!e&&n.apply(u,i),clearTimeout(e),e=setTimeout(a,t)}},A.once=function(n){var t,r=!1;return function(){return r?t:(r=!0,t=n.apply(this,arguments))}},A.wrap=function(n,t){return function(){var r=[n].concat(c.call(arguments,0));return t.apply(this,r)}},A.compose=function(){var n=arguments;return function(){for(var t=arguments,r=n.length-1;r>=0;r--)t=[n[r].apply(this,t)];return t[0]}},A.after=function(n,t){return 0>=n?t():function(){return--n<1?t.apply(this,arguments):void 0}},A.keys=j||function(n){if(n!==Object(n))throw new TypeError("Invalid object");var t=[];for(var r in n)A.has(n,r)&&(t[t.length]=r);return t},A.values=function(n){return A.map(n,A.identity)},A.functions=A.methods=function(n){var t=[];for(var r in n)A.isFunction(n[r])&&t.push(r);return t.sort()},A.extend=function(n){return w(c.call(arguments,1),function(t){for(var r in t)n[r]=t[r]}),n},A.pick=function(n){var t={};return w(A.flatten(c.call(arguments,1)),function(r){r in n&&(t[r]=n[r])}),t},A.defaults=function(n){return w(c.call(arguments,1),function(t){for(var r in t)null==n[r]&&(n[r]=t[r])}),n},A.clone=function(n){return A.isObject(n)?A.isArray(n)?n.slice():A.extend({},n):n},A.tap=function(n,t){return t(n),n},A.isEqual=function(t,r){return n(t,r,[])},A.isEmpty=function(n){if(null==n)return!0;if(A.isArray(n)||A.isString(n))return 0===n.length;for(var t in n)if(A.has(n,t))return!1;return!0},A.isElement=function(n){return!(!n||1!=n.nodeType)},A.isArray=x||function(n){return"[object Array]"==l.call(n)},A.isObject=function(n){return n===Object(n)},A.isArguments=function(n){return"[object Arguments]"==l.call(n)},A.isArguments(arguments)||(A.isArguments=function(n){return!(!n||!A.has(n,"callee"))}),A.isFunction=function(n){return"[object Function]"==l.call(n)},A.isString=function(n){return"[object String]"==l.call(n)},A.isNumber=function(n){return"[object Number]"==l.call(n)},A.isFinite=function(n){return A.isNumber(n)&&isFinite(n)},A.isNaN=function(n){return n!==n},A.isBoolean=function(n){return n===!0||n===!1||"[object Boolean]"==l.call(n)},A.isDate=function(n){return"[object Date]"==l.call(n)},A.isRegExp=function(n){return"[object RegExp]"==l.call(n)},A.isNull=function(n){return null===n},A.isUndefined=function(n){return void 0===n},A.has=function(n,t){return f.call(n,t)},A.noConflict=function(){return t._=r,this},A.identity=function(n){return n},A.times=function(n,t,r){for(var e=0;n>e;e++)t.call(r,e)},A.escape=function(n){return(""+n).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")},A.result=function(n,t){if(null==n)return null;var r=n[t];return A.isFunction(r)?r.call(n):r},A.mixin=function(n){w(A.functions(n),function(t){B(t,A[t]=n[t])})};var F=0;A.uniqueId=function(n){var t=F++;return n?n+t:t},A.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var q=/.^/,k={"\\":"\\","'":"'",r:"\r",n:"\n",t:"	",u2028:"\u2028",u2029:"\u2029"};for(var S in k)k[k[S]]=S;var R=/\\|'|\r|\n|\t|\u2028|\u2029/g,I=/\\(\\|'|r|n|t|u2028|u2029)/g,M=function(n){return n.replace(I,function(n,t){return k[t]})};A.template=function(n,t,r){r=A.defaults(r||{},A.templateSettings);var e="__p+='"+n.replace(R,function(n){return"\\"+k[n]}).replace(r.escape||q,function(n,t){return"'+\n_.escape("+M(t)+")+\n'"}).replace(r.interpolate||q,function(n,t){return"'+\n("+M(t)+")+\n'"}).replace(r.evaluate||q,function(n,t){return"';\n"+M(t)+"\n;__p+='"})+"';\n";r.variable||(e="with(obj||{}){\n"+e+"}\n"),e="var __p='';var print=function(){__p+=Array.prototype.join.call(arguments, '')};\n"+e+"return __p;\n";var u=new Function(r.variable||"obj","_",e);if(t)return u(t,A);var i=function(n){return u.call(this,n,A)};return i.source="function("+(r.variable||"obj")+"){\n"+e+"}",i},A.chain=function(n){return A(n).chain()};var N=function(n){this._wrapped=n};A.prototype=N.prototype;var T=function(n,t){return t?A(n).chain():n},B=function(n,t){N.prototype[n]=function(){var n=c.call(arguments);return o.call(n,this._wrapped),T(t.apply(A,n),this._chain)}};A.mixin(A),w(["pop","push","reverse","shift","sort","splice","unshift"],function(n){var t=u[n];N.prototype[n]=function(){var r=this._wrapped;t.apply(r,arguments);var e=r.length;return"shift"!=n&&"splice"!=n||0!==e||delete r[0],T(r,this._chain)}}),w(["concat","join","slice"],function(n){var t=u[n];N.prototype[n]=function(){return T(t.apply(this._wrapped,arguments),this._chain)}}),N.prototype.chain=function(){return this._chain=!0,this},N.prototype.value=function(){return this._wrapped}}).call(this);
"use strict";$CQ.SocialAuth=$CQ.SocialAuth||{},$CQ.SocialAuth.osgi=$CQ.SocialAuth.osgi||{},$CQ.SocialAuth.sociallogin=$CQ.SocialAuth.sociallogin||{},$CQ.SocialAuth.callback=$CQ.SocialAuth.callback||{},$CQ.SocialAuth.socialconnect=$CQ.SocialAuth.socialconnect||{},$CQ.SocialAuth.osgi.updateOAuthProviderConfig=function(){for(var t=this.findByType("checkbox"),e=new Array,i=0;i<t.length;i++){var o=t[i].name;-1==o.indexOf("oauth")&&this.getField(o).getValue()&&e.push(o.substring(o.indexOf("/")+1,o.length))}var n=this;CQ.HTTP.post(CQ.WCM.getPagePath()+"/jcr:content",function(t,e,i,o){e||$CQ(".connect-content").prepend("<div style='color:red'>Error in update of OAuth Configuration</div>"),n.hide(),CQ.Util.reload()},{_charset_:"utf-8","oauth.client.id":this.getField("./oauth.client.id").getValue(),"oauth.client.secret":this.getField("./oauth.client.secret").getValue(),"oauth.create.users":this.getField("./oauth.create.users").getValue(),"oauth.create.users.groups":this.getField("./oauth.create.users.groups").getValue(),"oauth.encode.userids":this.getField("./oauth.encode.userids").getValue(),"oauth.config.provider.id":this.getField("./oauth.config.provider.id").getValue(),"oauth.scope":e,"oauth.callBackUrl":this.getField("./oauth.callBackUrl").getValue(),urlParams:this.getField("./urlParams").getValue()});return!1},$CQ.SocialAuth.sociallogin.doOauth=function(t,e,i,o,n){var a,a=(CQ_Analytics.ProfileDataMgr.getProperty("authorizableId"),e+".login.html"+o+"?configid="+i);n&&(a=n+a),window.open(a,"_BLANK","width=1024,height=630,status=0,menubar=0,toolbar=0,scrollbars=1")},$CQ.SocialAuth.sociallogin.showDialog=function(t,e){var i=$.extend({},{height:200,width:550,zIndex:11e3,resizable:!1,modal:!0},e);$CQ("#"+t).dialog(i),$CQ(".cqusername").focus(),$CQ.ui.dialog.overlay.maxZ=11e3},$CQ.SocialAuth.oauthCallbackComplete=function(t){CQ_Analytics.ProfileDataMgr.loadProfile(t),$("div.ss-page-signin").length?window.location.href=window.location.origin:CQ.shared.Util.reload()},$CQ.SocialAuth.userGroupOptions=function(){var t=CQ.HTTP.get(CQ.WCM.getPagePath()+"/jcr:content.usergroupoptions.json");if(CQ.utils.HTTP.isOk(t)){var e=t.body,i=JSON.parse(e);return i}return console.log("request for user group options was not ok: "+t.status+" - "+t.body),[]};var socialConnectCurrentSlider=null;$CQ.SocialAuth.socialconnect.initSliders=function(){$CQ(".slider-button").toggle(function(){$CQ(this).hasClass("on")?$CQ.SocialAuth.socialconnect.initiateDisconnect(this):$CQ.SocialAuth.socialconnect.initiateConnect(this)},function(){$CQ(this).hasClass("on")?$CQ.SocialAuth.socialconnect.initiateDisconnect(this):$CQ.SocialAuth.socialconnect.initiateConnect(this)})},$CQ.SocialAuth.socialconnect.initiateConnect=function(t){t&&(socialConnectCurrentSlider=$CQ(t),$CQ.SocialAuth.sociallogin.doOauth(null,socialConnectCurrentSlider.attr("data-configpagepath"),socialConnectCurrentSlider.attr("data-configid"),socialConnectCurrentSlider.attr("data-loginSuffix")))},$CQ.SocialAuth.socialconnect.completeConnect=function(){var t=socialConnectCurrentSlider;t&&(t.addClass("on").html(CQ.I18n.getMessage("ON")),t.parents(".channeldetails").find(".connectnamelink").show(),t.parents(".channeldetails").find(".connectchangelink").show(),socialConnectCurrentSlider=null)},$CQ.SocialAuth.socialconnect.initiateDisconnect=function(t){if(t){var e=$CQ(t);$CQ.SocialAuth.socialconnect.disconnect(e.attr("data-socialprofilepath"),e.attr("data-clientid"))&&(e.removeClass("on").html(CQ.I18n.getMessage("OFF")),e.parents("#channeldetails"),e.parents(".channeldetails").find(".connectnamelink").hide(),e.parents(".channeldetails").find(".connectchangelink").hide())}},$CQ.SocialAuth.socialconnect.disconnect=function(t,e){if(null!=t&&null!=e){$CQ.post(t,{_charset_:"utf-8",":operation":"delete",":applyTo":t},null);var i={},o="token-"+e+"@Delete";i[o]="deleting token";var n="oauthid-"+e+"@Delete";return i[n]="deleting oauth",i._charset_="utf-8",$CQ.post(t+"/../../oauth",i,null),!0}return!1},$CQ.SocialAuth.socialconnect.doChange=function(t,e,i,o,n){$CQ.SocialAuth.socialconnect.disconnect(t,n),$CQ.SocialAuth.sociallogin.doOauth(null,e,i,o)};
function initializeTeaserLoader(t,e,i,n,r,a){if(n=!(!CQ.Ext||"true"!=n&&n!==!0),window.CQ_Analytics){var s=function(){var s="/_jcr_content/par.html";n&&(s+="?wcmmode=disabled");var o=CQ_Analytics.PageDataMgr.getExperience();if(o)return CQ_Analytics.PageDataMgr.clearExperience(),void CQ_Analytics.Utils.loadElement(o+s,i);var l=function(i){var n="",r=new Array;if(CQ_Analytics.SegmentMgr)for(var a=0,s=0;s<t.length;s++){var o=CQ.shared.HTTP.externalize(t[s].path+".html");if(t[s].segments&&0!=t[s].segments.length&&CQ_Analytics.SegmentMgr.resolveArray(t[s].segments)!==!0){var l=[t[s].title,t[s].thumbnail,o];n+=CQ.I18n.getMessage('<a href="{2}" class="cq-teaser-segment-link"><img src="{1}" class="cq-teaser-decision-thumbnail cq-teaser-decision-nomatch"></a>Experience: {0} - no match<br>',l)}else{var c=CQ_Analytics.SegmentMgr.getMaxBoost(t[s].segments),l=[t[s].title,c,t[s].thumbnail,o];n+=i==t[s].path?CQ.I18n.getMessage('<b><a href="{3}" class="cq-teaser-segment-link"><img src="{2}" class="cq-teaser-decision-thumbnail cq-teaser-decision-match"></a>Experience: {0} - match ( boost = {1} )</b><br>',l):CQ.I18n.getMessage('<a href="{3}" class="cq-teaser-segment-link"><img src="{2}" class="cq-teaser-decision-thumbnail cq-teaser-decision-match"></a>Experience: {0} - match ( boost = {1} )<br>',l),c==a?r.push(t[s]):c>a&&(r=new Array,r.push(t[s]),a=c)}}return n+=CQ.I18n.getMessage("<br>Strategy <b>{0}</b> selected current teaser.<br>",e)},c=null,C=function(){var o=new Array;if(CQ_Analytics.SegmentMgr)for(var C=0,g=0;g<t.length;g++)if(!t[g].segments||0==t[g].segments.length||CQ_Analytics.SegmentMgr.resolveArray(t[g].segments)===!0){var d=CQ_Analytics.SegmentMgr.getMaxBoost(t[g].segments);d==C?o.push(t[g]):d>C&&(o=new Array,o.push(t[g]),C=d)}if(o.length>0){var y=o[0];if(CQ_Analytics.StrategyMgr){var u=CQ_Analytics.StrategyMgr.choose(e,o);null!=u&&(y=u)}if(!c||c.path!=y.path){c=y;var p=y.path+s;if(p=CQ.shared.HTTP.addSelectors(p,CQ.shared.HTTP.getSelectors(window.location.href)),CQ_Analytics.Utils.loadTeaserElement(p,i),window.CQ_trackTeasersStats&&r&&(CQ_Analytics.loadedTeasersStack||(CQ_Analytics.loadedTeasersStack=[],$CQ(window).unload(function(){try{var t=CQ_Analytics.loadedTeasersStack;if(t){delete CQ_Analytics.loadedTeasersStack;for(var e=r,i=0;i<t.length;i++)e=CQ.shared.HTTP.addParameter(e,"path",t[i]);CQ.shared.HTTP.get(e,function(){})}}catch(n){}})),CQ_Analytics.loadedTeasersStack.push(y.path)),n&&a){var f=CQ.WCM.getEditable(a);f&&(f&&f.teaserToolTip?(f.teaserToolTip.hide(),f.teaserToolTip.remove(),f.teaserToolTip=null):(f.on(CQ.wcm.EditRollover.EVENT_SHOW_HIGHTLIGHT,function(t){this.teaserInfoButton||(this.teaserInfoButton=CQ.Ext.DomHelper.append("CQ",{tag:"div",cls:"x-tool x-tool-help cq-teaser-tooltip-tool"},!0),this.teaserInfoButton.position("absolute"),this.teaserInfoButton.on("click",function(){f.teaserToolTip||(f.teaserToolTip=new CQ.Ext.Tip({html:l(c.path),title:CQ.I18n.getMessage("Selection decision"),width:450,autoHide:!1,closable:!0,height:300,floating:!0,autoHeight:!1,bodyStyle:"overflow-y: scroll;"}));var t=this.getXY();f.teaserToolTip.setPosition(t[0]-460,t[1]-100),f.teaserToolTip.show()})),this.teaserInfoButton.anchorTo(t.frameBottom.getEl(),"tr",[-26,-15]),this.teaserInfoButton.show()}),f.on(CQ.wcm.EditRollover.EVENT_HIDE_HIGHTLIGHT,function(t){this.teaserInfoButton&&this.teaserInfoButton.hide()})))}}}else{if(n){var f=CQ.WCM.getEditable(a);f&&f.teaserToolTip&&(f.teaserToolTip.hide(),f.teaserToolTip.remove(),f.teaserToolTip=null)}CQ_Analytics.Utils.clearElement(i),c=null}};C.call(),CQ_Analytics.SegmentMgr&&CQ_Analytics.SegmentMgr.addListener("update",C)};CQ_Analytics.CCM.areStoresInitialized?s.call(this):CQ_Analytics.CCM.addListener("storesinitialize",s)}}function initializeLandingPageLoader(t,e,i,n,r){if(n=CQ.Ext&&("true"==n||n===!0),window.CQ_Analytics){var a=".html",s=function(){var s=null,o=function(){var o=new Array;if(CQ_Analytics.SegmentMgr)for(var l=0,c=0;c<t.length;c++)if(!t[c].segments||0==t[c].segments.length||CQ_Analytics.SegmentMgr.resolveArray(t[c].segments)===!0){var C=CQ_Analytics.SegmentMgr.getMaxBoost(t[c].segments);C==l?o.push(t[c]):C>l&&(o=new Array,o.push(t[c]),l=C)}if(o.length>0){var g=o[0];if(CQ_Analytics.StrategyMgr){var d=CQ_Analytics.StrategyMgr.choose(e,o);null!=d&&(g=d)}if(!s||s.path!=g.path){var y=s;s=g;var u=CQ.shared.HTTP.get(g.path+a),p=u.responseText,f=function(t,e){if(t&&-1!=t.indexOf('id="'+e+'"'))for(var i=t.indexOf('id="'+e+'"'),n=t.substring(0,i).lastIndexOf("<div"),r=t.substring(n),a=r.split(new RegExp("<div","ig")),s=0,o=0;o<a.length;o++){s++;for(var l=a[o].split(new RegExp("</div","ig")),c=1;c<l.length;c++)if(s--,1==s){var C=a[o].lastIndexOf("</div")+6;return C=r.indexOf(a[o])+C,r=r.substring(0,C),r=r.substring(r.indexOf(">")+1,r.lastIndexOf("</div"))}}return""};p=f(p,i);var h=$CQ("#"+i)[0],A=function(t,e){if(n){var i=CQ.WCM.getEditables();for(var r in i){var a=i[r];t&&-1==a.path.indexOf(t)||(a.hide(),a.remove())}}},Q=document.createElement("div");if(Q.innerHTML=p,y)$CQ("object",h).parent().fadeOut("slow"),$CQ("img",h).fadeOut("slow"),$CQ(h).slideUp("slow",function(){A(y.path,!1),$CQ(h).children().remove();h.insertBefore(Q,h.firstChild);$CQ(h).slideDown("slow",function(){n&&CQ.DOM.executeScripts(CQ.Ext.get(Q))})});else{h.insertBefore(Q,h.firstChild);$CQ(h).slideDown("slow",function(){n&&CQ.DOM.executeScripts(CQ.Ext.get(Q))})}try{window.CQ_trackLandingPagesStats&&r&&(CQ_Analytics.loadedLandingPagesStack||(CQ_Analytics.loadedLandingPagesStack=[],$CQ(window).unload(function(){try{var t=CQ_Analytics.loadedLandingPagesStack;if(t){delete CQ_Analytics.loadedLandingPagesStack;for(var e=r,i=0;i<t.length;i++)e=CQ.shared.HTTP.addParameter(e,"path",t[i]);CQ.shared.HTTP.get(e,function(){})}}catch(n){}})),CQ_Analytics.loadedLandingPagesStack.push(g.path))}catch(_){}}}else CQ_Analytics.Utils.clearElement(i),s=null};o.call(),CQ_Analytics.SegmentMgr&&CQ_Analytics.SegmentMgr.addListener("update",o)};CQ_Analytics.ClickstreamcloudMgr&&(CQ_Analytics.ClickstreamcloudMgr.areStoresLoaded?s.call(this):CQ_Analytics.ClickstreamcloudMgr.addListener("storesloaded",s))}}window.CQ_Analytics||(window.CQ_Analytics={}),CQ_Analytics.Operator=function(){return function(){}}(),CQ_Analytics.Operator.IS="is",CQ_Analytics.Operator.EQUALS="equals",CQ_Analytics.Operator.NOT_EQUAL="notequal",CQ_Analytics.Operator.GREATER="greater",CQ_Analytics.Operator.GREATER_OR_EQUAL="greaterorequal",CQ_Analytics.Operator.OLDER="older",CQ_Analytics.Operator.OLDER_OR_EQUAL="olderorequal",CQ_Analytics.Operator.LESS="less",CQ_Analytics.Operator.LESS_OR_EQUAL="lessorequal",CQ_Analytics.Operator.YOUNGER="younger",CQ_Analytics.Operator.YOUNGER_OR_EQUAL="youngerorequal",CQ_Analytics.Operator.CONTAINS="contains",CQ_Analytics.Operator.BEGINS_WITH="beginswith",CQ_Analytics.OperatorActions=function(){var mapping={},addOperator=function(t,e,i){mapping[t]=[e,i]};addOperator(CQ_Analytics.Operator.EQUALS,"equals","=="),addOperator(CQ_Analytics.Operator.IS,"is","=="),addOperator(CQ_Analytics.Operator.NOT_EQUAL,"is not equal to","!="),addOperator(CQ_Analytics.Operator.GREATER,"is greater than",">"),addOperator(CQ_Analytics.Operator.GREATER_OR_EQUAL,"is equal to or greater than",">="),addOperator(CQ_Analytics.Operator.OLDER,"is older than",">"),addOperator(CQ_Analytics.Operator.OLDER_OR_EQUAL,"is equal to or older than",">="),addOperator(CQ_Analytics.Operator.LESS,"is less than","<"),addOperator(CQ_Analytics.Operator.LESS_OR_EQUAL,"is equal to or less than","<="),addOperator(CQ_Analytics.Operator.YOUNGER,"is younger than","<"),addOperator(CQ_Analytics.Operator.YOUNGER_OR_EQUAL,"is equal to or younger than","<="),addOperator(CQ_Analytics.Operator.CONTAINS,"contains",function(t,e){return t?e?(t=""+t,e=""+e,-1!=t.toLowerCase().indexOf(e.toLowerCase())):!0:!1}),addOperator(CQ_Analytics.Operator.BEGINS_WITH,"begins with",function(t,e){return t?e?(t=""+t,e=""+e,0==t.toLowerCase().indexOf(e.toLowerCase())):!0:!1});var getByIndex=function(t,e){return mapping[t]&&mapping[t][e]?mapping[t][e]:""},escapeQuote=function(t){return t&&(t=t.replace(new RegExp("\\'","ig"),t)),t};return{getText:function(t){return getByIndex(t,0)},setText:function(t,e){mapping[t]&&mapping[t][0]&&(mapping[t][0]=e)},getOperation:function(t){return getByIndex(t,1)},operate:function(object,property,operator,value,valueFormat){try{if(object&&object[property]){var toEval="",op=this.getOperation(operator);op=op?op:operator;var objectValue=CQ.shared.XSS.getXSSTablePropertyValue(object,property);if("function"==typeof op)return op.call(this,objectValue,value,valueFormat);if(valueFormat)toEval=valueFormat+"('"+objectValue+"') "+op+" "+valueFormat+"('"+value+"')";else{var s1=escapeQuote(objectValue),s2=escapeQuote(value);toEval="'"+s1+"' "+op+" '"+s2+"'"}var b=eval(toEval);return b}}catch(e){}return!1}}}(),CQ_Analytics.Utils=new function(){return{registerDocumentEventHandler:function(t,e){var i=window.document[t];"function"!=typeof window.document[t]?window.document[t]=e:window.document[t]=function(t){i&&i(t),e(t)}},eventWrapper:function(t){return function(e){var i,n;document.all?(i=window.event.keyCode,n=window.event):(i="undefined"!=typeof e.which?e.which:0,n=e),n&&t(n,i)}},loadElement:function(t,e){$CQ("#"+e).load(t)},loadTeaserElement:function(t,e){var i=$CQ("#"+e).css("height"),n=$CQ("#"+e).height();n>0&&$CQ("#"+e).css("height",n);var r=function(t){if(t&&""!=t){var n=$CQ(t).css("display","none");$CQ("#"+e).append(n),n.fadeIn(function(){i&&"0px"!=i&&$CQ("#"+e).css("height",i)})}else i&&"0px"!=i&&$CQ("#"+e).css("height",i)},a=function(t,e){CQ_Analytics.Utils.teasersCache||(CQ_Analytics.Utils.teasersCache={}),CQ_Analytics.Utils.teasersCache[t]=e},s=function(){CQ_Analytics.Utils.teasersCache&&CQ_Analytics.Utils.teasersCache[t]?r(CQ_Analytics.Utils.teasersCache[t]):(CQ_Analytics.Utils.teasersLoading=CQ_Analytics.Utils.teasersLoading||{},CQ_Analytics.Utils.teasersLoading[t]?window.setTimeout(function(){CQ_Analytics.Utils.loadTeaserElement(t,e)},100):(CQ_Analytics.Utils.teasersLoading[t]=!0,o()))},o=function(){var e=t,i=location.href;"undefined"!=typeof CQ_CONTENT_PATH&&(i=CQ_CONTENT_PATH);var n=CQ.shared.HTTP.getParameter(i,"wcmmode");n&&(e+=(e.indexOf("?")>0?"&":"?")+"wcmmode="+n),CQ.shared.HTTP.get(e,function(e,i,n){if(i){var r=n.body;r&&(r=r.replace(new RegExp("\\n","ig"),""),r=r.replace(new RegExp("\\r","ig"),""),a(t,r),delete CQ_Analytics.Utils.teasersLoading[t],s())}else a(t,"")})},l=$CQ("#"+e).children().length;if(l>0){var c=0;$CQ("#"+e).children().fadeOut(function(){var t=$CQ(this);window.setTimeout(function(){t.remove(),c++,c>=l&&s()},50)})}else s()},clearElement:function(t){t&&$CQ("#"+t).html("")},indexOf:function(t,e){for(var i=0,n=t.length;n>i;i++)if(t[i]==e)return i;return-1},load:function(t,e,i){return CQ.shared.HTTP.get(t,e,i)},post:function(t,e,i,n){return CQ.shared.HTTP.post(t,e,i,n)},getPagePath:function(){return CQ.shared.HTTP.getPath()},getPath:function(t){return CQ.shared.HTTP.getPath(t)},addParameter:function(t,e,i){return CQ.shared.HTTP.addParameter(t,e,i)},removeParameters:function(t){return CQ.shared.HTTP.removeParameters(t)},removeAnchor:function(t){return CQ.shared.HTTP.removeAnchor(t)},getSchemeAndAuthority:function(t){return CQ.shared.HTTP.getSchemeAndAuthority(t)},internalize:function(t,e){return CQ.shared.HTTP.internalize(e)},externalize:function(t,e){return CQ.shared.HTTP.externalize(t,e)},encodePathOfURI:function(t){return CQ.shared.HTTP.encodePathOfURI(t)},encodePath:function(t){return CQ.shared.HTTP.encodePath(t)},getContextPath:function(){return CQ.shared.HTTP.getContextPath()},detectContextPath:function(){return CQ.shared.HTTP.detectContextPath()},urlEncode:function(t){if(!t)return"";if("string"==typeof t)return t;var e=[];for(var i in t){var n=t[i],r=encodeURIComponent(i),a=typeof n;if("undefined"==a)e.push(r,"=&");else if("function"!=a&&"object"!=a)e.push(r,"=",encodeURIComponent(n),"&");else if("array"==typeof n)if(n.length)for(var s=0,o=n.length;o>s;s++)e.push(r,"=",encodeURIComponent(void 0===n[s]?"":n[s]),"&");else e.push(r,"=&")}return e.pop(),e.join("")},getUID:function(){var t=Math.floor(Math.random()*(Math.pow(2,42)-1));return this.getTimestamp().toString(16)+t.toString(16)},getTimestamp:function(){var t=new Date;return t.getTime()},insert:function(t,e,i){if(!t||isNaN(e)||!i)return t;for(var n="",r=0,a=e;a<t.length;)n+=t.substring(r,a)+i,r+=e,a+=e;return r<t.length&&(n+=t.substring(r)),n},addListener:function(){return window.addEventListener?function(t,e,i,n){t.addEventListener(e,i,n)}:window.attachEvent?function(t,e,i,n){t.attachEvent("on"+e,i)}:function(){}},removeListener:function(){return window.removeEventListener?function(t,e,i,n){t.removeEventListener(e,i,n)}:window.detachEvent?function(t,e,i){t.detachEvent("on"+e,i)}:function(){}}}},CQ_Analytics.ClickstreamcloudRenderingUtils=new function(){return{createLink:function(t,e,i,n){var r=document.createElement("a");if(r.href=n,r.onclick=e,r.innerHTML=t,i)for(var a in i)i.hasOwnProperty(a)&&(r[a]=i[a]);return r},createStaticLink:function(t,e,i){var n=document.createElement("a");return n.href=e,n.innerHTML=t,n.title=i,n.alt=i,n},createNameValue:function(t,e,i,n){var r=document.createElement("span");return r.className=i||"ccl-data",r.innerHTML=t+" = "+e,r.title=n,r.alt=n,r},createText:function(t,e,i){var n=document.createElement("span");return n.className=e||"ccl-data",t&&t.indexOf&&(-1!=t.indexOf("/home")&&-1!=t.indexOf("/image")||-1!=t.indexOf("/")&&-1!=t.indexOf(".png"))?n.innerHTML='<img src="'+t+'.prof.thumbnail.png" border="0">':t&&t.indexOf&&-1!=t.indexOf("www.gravatar.com")?n.innerHTML='<img src="'+t+'">':n.innerHTML=t,n.title=i,n.alt=i,n},createEditablePropertySpan:function(t,e){var i="var editSpan = this.nextSibling; this.style.display = 'none'; editSpan.style.display = 'block';",n="var editSpan = this.parentNode; var readSpan = this.parentNode.previousSibling;var newValue = this.value;editSpan.style.display = 'none'; readSpan.innerHTML = '"+t+" = '+value; readSpan.style.display = 'block';",r=document.createElement("span");return r.innerHTML='<span class="ccl-data" onclick="'+i+'">'+t+" = "+e+"</span>",r.innerHTML+='<span class="ccl-data" style="display: none;">'+t+' = <input class="ccl-input" type="text" value="'+e+'" onblur="'+n+'"></span>',r.className="ccl-data",r}}},CQ_Analytics.ClientContextUtils=new function(){return{renderStoreProperty:function(t,e,i,n,r,a){CQ_Analytics&&CQ_Analytics.CCM&&CQ_Analytics.CCM.onReady(function(){var s=function(){var s=CQ_Analytics.StoreRegistry.getStore(e);if(s){var o=function(){var e=s.getProperty(i)||a,o=$CQ("#"+t);if(!o.attr("contenteditable")||"inherit"==o.attr("contenteditable"))if("string"!=typeof e||(0!=e.indexOf("/")||-1==e.toLowerCase().indexOf(".png")&&-1==e.toLowerCase().indexOf(".jpg")&&-1==e.toLowerCase().indexOf(".gif"))&&0!=e.toLowerCase().indexOf("http"))e=CQ_Analytics.Variables.replaceVariables(e),e=CQ_Analytics.isUIAvailable?e&&""!=e?e=n+e+r:CQ.I18n.getMessage("No",null,"Ex: No address, No keywords")+" "+i:e&&""!=e?e=n+e+r:"No "+i,o.html()!=e&&s.fireEvent("beforepropertyrender",s,t)!==!1&&(o.html(e),s.fireEvent("propertyrender",s,t));else if(e&&""!=e){var l="";0==o.parents(".cq-cc-thumbnail").length||0==e.toLowerCase().indexOf("http")||0==e.indexOf("/libs/wcm/mobile")?l=e.replace(new RegExp("&amp;","g"),"&"):(l="/etc/clientcontext/shared/thumbnail/content.png",l=CQ.shared.HTTP.addParameter(l,"path",CQ_Analytics.Variables.replaceVariables(e))),l=CQ_Analytics.Variables.replaceVariables(l),o.find("div").css("background-image")!="url("+l+")"&&s.fireEvent("beforepropertyrender",s,t)!==!1&&(o.html(""),o.children().remove(),$CQ("<div>").addClass("cq-cc-thumbnail-img").css("background-image","url("+CQ.shared.HTTP.externalize(l)+")").appendTo(o),s.fireEvent("propertyrender",s,t))}else o.children().remove(),CQ_Analytics.isUIAvailable?o.html(CQ.I18n.getMessage("No",null,"Ex: No address, No keywords")+" "+i):o.html("No "+i)};s.fireEvent("beforeinitialpropertyrender",s,t)!==!1&&(o(),s.addListener&&s.addListener("update",function(){o()}),s.fireEvent("initialpropertyrender",s,t))}};CQ_Analytics.ClientContextUtils.onStoreRegistered(e,s)})},renderStore:function(t,e){CQ_Analytics&&CQ_Analytics.CCM&&t&&e&&CQ_Analytics.CCM.onReady(function(){var i=function(){var i=CQ_Analytics.StoreRegistry.getStore(e);if(i){i.divId=t;var n=function(){i.fireEvent("beforerender",i,i.divId)!==!1&&(i.renderer(i,i.divId),i.fireEvent("render",i,i.divId))};i.fireEvent("beforeinitialrender",i,t)!==!1&&(n(),i.addListener&&i.addListener("update",function(){n()}),i.fireEvent("initialrender",i,t))}};CQ_Analytics.ClientContextUtils.onStoreRegistered(e,i)})},storesOptionsProvider:function(){var t=[],e=CQ_Analytics.StoreRegistry.getStores();for(var i in e)t.push({value:i});return t},storePropertiesOptionsProvider:function(t,e){var i=[],n=CQ_Analytics.StoreRegistry.getStore(t);if(n)for(var r=n.getPropertyNames(),a=0;a<r.length;a++){var s=r[a];if(!CQ.shared.XSS.KEY_REGEXP.test(s)){var o={value:s};e&&(o.text=s+" - "+n.getProperty(s)),i.push(o)}}return i},onStoreRegistered:function(t,e){if(e){var i=CQ_Analytics.StoreRegistry.getStore(t);i?e.call(i,i):CQ_Analytics.CCM.addListener("storeregister",function(i,n){n.getName()==t&&e.call(n,n)})}},onStoreInitialized:function(t,e,i){i===!0&&(i=CQ_Analytics.ClientContextUtils.DEFAULT_INIT_DELAY);var n=function(){var n=CQ_Analytics.StoreRegistry.getStore(t);n.DELAYED_INIT_TIMEOUT&&(window.clearTimeout(n.DELAYED_INIT_TIMEOUT),n.DELAYED_INIT_TIMEOUT=null),i>0?n.DELAYED_INIT_TIMEOUT=window.setTimeout(function(){n.DELAYED_INIT_TIMEOUT=null,e.call(n,"initialize",n)},i):e.call(n,"initialize",n)},r=CQ_Analytics.StoreRegistry.getStore(t);r?r.isInitialized()?(n.call(r),r.addListener("initialize",function(t,e){n.call(e)})):r.addListener("initialize",function(t,e){n.call(e)}):CQ_Analytics.CCM.addListener("storeregister",function(n,r){r.getName()==t&&CQ_Analytics.ClientContextUtils.onStoreInitialized(t,e,i)})},init:function(t,e){CQ_Analytics.ClientContextMgr.PATH=t,CQ_Analytics.ClientContextMgr.loadConfig(null,!0);var i=CQ.shared.HTTP.externalize(t+"/content/jcr:content/stores.init.js");i=CQ.shared.HTTP.addParameter(i,"path",e),i=CQ.shared.HTTP.noCaching(i);CQ.shared.HTTP.get(i)},initUI:function(t,e,i){CQ_Analytics.ClientContextUI.create(t,e,i)}}},CQ_Analytics.ClientContextUtils.DEFAULT_INIT_DELAY=200,CQ_Analytics.Variables=new function(){return{containsVariable:function(t){return CQ_Analytics.Variables.getVariables(t).length>0},getVariables:function(t){if(!t||"string"!=typeof t)return[];var e=t.match(new RegExp("\\$\\{([\\w/]*)\\}","ig"));return e?e:[]},replaceVariables:function(t){if(!t)return t;for(var e="",i=t,n=CQ_Analytics.Variables.getVariables(t);n.length>0&&-1==e.indexOf(n.join());){for(var r=0;r<n.length;r++){var a=CQ_Analytics.Variables.getPropertyPath(n[r]),s=CQ_Analytics.ClientContext.get(a)||"";i=CQ_Analytics.Variables.replace(i,a,s)}e+=n.join(),n=CQ_Analytics.Variables.getVariables(i)}return i},getPropertyPath:function(t){return!t||t.length<2?null:t.substring(2,t.length-1)},getPropertyName:function(t){var e=CQ_Analytics.Variables.getPropertyPath(t);if(e){var i=e.split("/");if(3==i.length)return i[2]}return null},getStoreName:function(t){var e=CQ_Analytics.Variables.getPropertyPath(t);if(e){var i=e.split("/");if(i.length>1)return i[1]}return null},replace:function(t,e,i){return t.replace(new RegExp("\\$\\{"+e+"\\}","ig"),i)}}},CQ_Analytics.SessionPersistence=CQ.shared.ClientSidePersistence,CQ_Analytics.Cookie=CQ.shared.ClientSidePersistence.CookieHelper,CQ_Analytics.Observable=function(){this.fireEvent=function(t){if(t&&this.listeners&&!this.suppressEvents){t=t.toLowerCase();for(var e=Array.prototype.slice.call(arguments,0),i=this.listeners.slice(0),n=0;n<i.length;n++){var r=i[n];if(t==r.event&&r.fireFn.apply(r.scope||this||window,e)===!1)return!1}}return!0}},CQ_Analytics.Observable.prototype.addListener=function(t,e,i){this.listeners=this.listeners||new Array,t&&e&&this.listeners.push({event:t.toLowerCase(),fireFn:e,scope:i})},CQ_Analytics.Observable.prototype.removeListener=function(t,e){if(this.listeners=this.listeners||new Array,t&&e)for(var i=0;i<this.listeners.length;i++)this.listeners[i].event==t&&this.listeners[i].fireFn==e&&this.listeners.splice(i,1)},CQ_Analytics.Observable.prototype.setSuppressEvents=function(t){this.suppressEvents=t},CQ_Analytics.Observable.prototype.listeners=null,CQ_Analytics.Observable.prototype.suppressEvents=!1,CQ_Analytics.StoreRegistry||(CQ_Analytics.StoreRegistry=new function(){var t={};return{register:function(e){e.STORENAME&&(t[e.STORENAME]=e)},getStores:function(){return t},getStore:function(e){return t[e]}}}),CQ_Analytics.SessionStore=function(){},CQ_Analytics.SessionStore.prototype=new CQ_Analytics.Observable,CQ_Analytics.SessionStore.prototype.setProperty=function(t,e){null==this.data&&this.init(),this.data[t]=e,this.fireEvent("update",t)},CQ_Analytics.SessionStore.prototype.setProperties=function(t){null==this.data&&this.init();var e=[];for(var i in t)if(t.hasOwnProperty(i)){e.push(i);var n=t[i];this.data[i]=n}e.length>0&&this.fireEvent("update",e)},CQ_Analytics.SessionStore.prototype.initialized=!1,CQ_Analytics.SessionStore.prototype.init=function(){this.initialized=!0,this.fireEvent("initialize",this)},CQ_Analytics.SessionStore.prototype.getLabel=function(t){return t},CQ_Analytics.SessionStore.prototype.getLink=function(t){return t},CQ_Analytics.SessionStore.prototype.removeProperty=function(t){null==this.data&&this.init(),this.data[t]&&delete this.data[t],this.fireEvent("update",t)},CQ_Analytics.SessionStore.prototype.getPropertyNames=function(t){null==this.data&&this.init(),t=t?t:[];var e=new Array;for(var i in this.data)-1==CQ_Analytics.Utils.indexOf(t,i)&&e.push(i);return e},CQ_Analytics.SessionStore.prototype.getSessionStore=function(){return this},CQ_Analytics.SessionStore.prototype.clear=function(){this.data=null},CQ_Analytics.SessionStore.prototype.getData=function(t){if(null==this.data&&this.init(),t){var e={};for(var i in this.data)-1==CQ_Analytics.Utils.indexOf(t,i)&&(e[i]=this.data[i]);return e}return this.data},CQ_Analytics.SessionStore.prototype.reset=function(){null!=this.data&&(this.data=null,this.fireEvent("update"))},CQ_Analytics.SessionStore.prototype.getProperty=function(t,e){null==this.data&&this.init();var i=this.data[t];if(!e){var n=CQ.shared.XSS.getXSSValue(i);return n}return i},CQ_Analytics.SessionStore.prototype.getName=function(){return this.STORENAME},CQ_Analytics.SessionStore.prototype.addInitProperty=function(t,e){this.initProperty||(this.initProperty={}),this.initProperty[t]=e},CQ_Analytics.SessionStore.prototype.getInitProperty=function(t){return this.initProperty?this.initProperty[t]:null},CQ_Analytics.SessionStore.prototype.loadInitProperties=function(t,e){if(t)for(var i in t)this.addInitProperty(i,t[i]),e&&this.data&&void 0===this.data[i]&&this.setProperty(i,t[i])},CQ_Analytics.SessionStore.prototype.isInitialized=function(){return this.initialized},CQ_Analytics.PersistedSessionStore=function(){},CQ_Analytics.PersistedSessionStore.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.PersistedSessionStore.prototype.STOREKEY="key",CQ_Analytics.PersistedSessionStore.prototype.setNonPersisted=function(t){this.nonPersisted||(this.nonPersisted={}),this.nonPersisted[t]=!0},CQ_Analytics.PersistedSessionStore.EXCLUDED_PROPERTIES_REGEX="^generated*",CQ_Analytics.PersistedSessionStore.prototype.isPersisted=function(t){return this.nonPersisted||(this.nonPersisted={}),this.nonPersisted[t]!==!0&&!new RegExp(CQ_Analytics.PersistedSessionStore.EXCLUDED_PROPERTIES_REGEX,"ig").test(t)&&!$CQ.isFunction(this.data[t])&&"object"!=typeof this.data[t]},CQ_Analytics.PersistedSessionStore.prototype.getStoreKey=function(){return this.STOREKEY},CQ_Analytics.PersistedSessionStore.prototype.persist=function(){if(this.fireEvent("beforepersist")!==!1){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"});t.set(this.getStoreKey(),this.toString()),this.fireEvent("persist")}},CQ_Analytics.PersistedSessionStore.prototype.setProperty=function(t,e){null==this.data&&this.init(),this.data[t]=e,this.isPersisted(t)&&this.persist(),this.fireEvent("update",t)},CQ_Analytics.PersistedSessionStore.prototype.setProperties=function(t){null==this.data&&this.init();var e=[],i=!1;for(var n in t)if(t.hasOwnProperty(n)){e.push(n);var r=t[n];this.data[n]=r,this.isPersisted(n)&&(i=!0)}i&&this.persist(),e.length>0&&this.fireEvent("update",e)},CQ_Analytics.PersistedSessionStore.prototype.toString=function(){var t=null;if(this.data){var e=function(t){if(!t||"string"!=typeof t)return t;var e=t;return e=e.replace(new RegExp(",","g"),"&#44;"),e=e.replace(new RegExp("=","g"),"&#61;"),e=e.replace(new RegExp("\\|","g"),"&#124;")};for(var i in this.data)this.isPersisted(i)&&this.data.hasOwnProperty(i)&&(t=null===t?"":t+",",t+=i+"="+e(this.data[i]))}return t},CQ_Analytics.PersistedSessionStore.prototype.parse=function(t){var e=function(t){if(!t||"string"!=typeof t)return t;var e=t;return e=e.replace(new RegExp("&#44;","g"),","),e=e.replace(new RegExp("&#61;","g"),"="),e=e.replace(new RegExp("&#124;","g"),"|")},i={},n=t.split(",");for(var r in n)if(n.hasOwnProperty(r)){var a=n[r].split("=");2==a.length&&(i[a[0]]=e(a[1]))}return i},CQ_Analytics.PersistedSessionStore.prototype.reset=function(t){null!=this.data&&(this.data={},this.persist(),this.data=null,t||this.fireEvent("update"))},CQ_Analytics.PersistedSessionStore.prototype.removeProperty=function(t){null==this.data&&this.init(),this.data[t]&&(delete this.data[t],this.isPersisted(t)&&this.persist()),this.fireEvent("update",t)},CQ_Analytics.PersistedSessionStore.prototype.clear=function(){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"});t.remove(this.getStoreKey()),this.data=null},CQ_Analytics.ClientContextMgr||(CQ_Analytics.ClientContextMgr=function(){this.clientcontext=null,this.clientcontextToServer=null,this.stores={},this.data=null,this.config=null,this.isConfigLoaded=!1,this.areStoresLoaded=!1},CQ_Analytics.ClientContextMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ClientContextMgr.prototype.STOREKEY="CLIENTCONTEXT",CQ_Analytics.ClientContextMgr.prototype.STORENAME="clientcontext",CQ_Analytics.ClientContextMgr.prototype.INITIALIZATION_EVENT_TIMER=1e3,CQ_Analytics.ClientContextMgr.prototype.CONFIG_PATH=CQ_Analytics.Utils.externalize("/etc/clientcontext/legacy/config.json",!0),CQ_Analytics.ClientContextMgr.prototype.init=function(){this.initialized||(this.clientcontext={},this.clientcontextToServer={});var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),e=t.get(this.getStoreKey());e?this.data=this.parse(e):this.data={},this.initialized=!0,this.fireEvent("initialize",this)},CQ_Analytics.ClientContextMgr.prototype.getSessionId=function(){return this.data.sessionId||this.setSessionId(CQ_Analytics.Utils.getUID()),this.data.sessionId},CQ_Analytics.ClientContextMgr.prototype.setSessionId=function(t){t&&this.setProperty("sessionId",t)},CQ_Analytics.ClientContextMgr.prototype.getVisitorId=function(){return this.data.visitorId},CQ_Analytics.ClientContextMgr.prototype.setVisitorId=function(t){this.setProperty("visitorId",t)},CQ_Analytics.ClientContextMgr.prototype.getId=function(){var t=this.getVisitorId();return t?t:this.getSessionId()},CQ_Analytics.ClientContextMgr.prototype.isAnonymous=function(){var t=this.getVisitorId();return!t},CQ_Analytics.ClientContextMgr.prototype.isMode=function(t){return CQ_Analytics.ClientContextMgr.ServerStorage.isMode(t)},CQ_Analytics.ClientContextMgr.prototype.get=function(t){return null==this.clientcontext&&this.init(),t?this.clientcontextToServer:this.clientcontext},CQ_Analytics.ClientContextMgr.prototype.register=function(t){null==this.clientcontext&&this.init();var e=this;this.clientcontext[t.getName()]=t.getData(),this.stores[t.getName()]=t,CQ_Analytics.StoreRegistry.register(t);var i=this.getStoreConfig(t.getName());i.stats!==!1&&"false"!=i.stats&&(this.clientcontextToServer[t.getName()]=t.getData(i.excludedFromStats)),this.initTimer&&(window.clearTimeout(this.initTimer),this.initTimer=null),this.initTimer=window.setTimeout(function(){e.fireEvent("storesinitialize"),e.areStoresInitialized=!0},this.INITIALIZATION_EVENT_TIMER),t.addListener("update",function(){e.update(t)}),CQ_Analytics.ClientContextMgr.ServerStorage.handleStoreRegistration(t),this.addListener("clear",function(){t.clear()}),this.fireEvent("storeregister",t),this.fireEvent("storeupdate",t)},CQ_Analytics.ClientContextMgr.prototype.update=function(t){null==this.clientcontext&&this.init(),this.clientcontext[t.getName()]=t.getData();var e=this.getStoreConfig(t.getName());e.stats!==!1&&"false"!=e.stats&&(this.clientcontextToServer[t.getName()]=t.getData(e.excludedFromStats)),this.fireEvent("storeupdate",t)},CQ_Analytics.ClientContextMgr.prototype.startPosting=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.startPosting()},CQ_Analytics.ClientContextMgr.prototype.stopPosting=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.stopPosting()},CQ_Analytics.ClientContextMgr.prototype.post=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.post()},CQ_Analytics.ClientContextMgr.prototype.getCCMToJCR=function(){return CQ_Analytics.ClientContextMgr.ServerStorage.getCCMToJCR()},CQ_Analytics.ClientContextMgr.prototype.getName=function(){return this.STORENAME},CQ_Analytics.ClientContextMgr.prototype.clear=function(){this.clientcontext=null,this.clientcontextToServer=null,this.fireEvent("clear")},CQ_Analytics.ClientContextMgr.prototype.getRegisteredStore=function(t){return this.stores&&this.stores[t]?this.stores[t]:null},CQ_Analytics.ClientContextMgr.prototype.loadConfig=function(c,autoConfig){var setConfig=function(t,e){t.config=e,t.isConfigLoaded=!0,t.fireEvent("configloaded"),t.fireEvent("storesloaded"),t.areStoresLoaded=!0};if(c)setConfig(this,c);else if(autoConfig)setConfig(this,{});else{var params={};params.path=CQ_Analytics.Utils.getPagePath(),params.cq_ck=(new Date).valueOf();var url=this.CONFIG_PATH;url+="?"+CQ_Analytics.Utils.urlEncode(params),CQ_Analytics.Utils.load(url,function(data,status,response){var config={};try{config=eval("config = "+response.responseText)}catch(error){}setConfig(this,config)},this)}},CQ_Analytics.ClientContextMgr.prototype.getConfig=function(){return this.config},CQ_Analytics.ClientContextMgr.prototype.getStoreConfig=function(t){return this.config&&this.config.configs&&this.config.configs[t]&&this.config.configs[t].store?this.config.configs[t].store:{}},CQ_Analytics.ClientContextMgr.prototype.getEditConfig=function(t){return this.config&&this.config.configs&&this.config.configs[t]&&this.config.configs[t].edit?this.config.configs[t].edit:{}},CQ_Analytics.ClientContextMgr.prototype.getUIConfig=function(t){return this.config&&this.config.configs&&this.config.configs[t]&&this.config.configs[t].ui?this.config.configs[t].ui:{}},CQ_Analytics.ClientContextMgr.prototype.getInitialData=function(t){return this.config&&this.config.data&&this.config.data[t]?this.config.data[t]:{}},CQ_Analytics.ClientContextMgr.prototype.getStores=function(){return this.stores},CQ_Analytics.ClientContextMgr.prototype.onReady=function(t,e){t&&(this.areStoresLoaded?t.call(e):this.addListener("storesloaded",t,e))},CQ_Analytics.ClientContextMgr=CQ_Analytics.CCM=new CQ_Analytics.ClientContextMgr,CQ_Analytics.ClickstreamcloudMgr=CQ_Analytics.CCM,CQ_Analytics.ContextCloudMgr=CQ_Analytics.CCM,CQ_Analytics.ClientContextMgr.PATH=null,CQ_Analytics.ClientContextMgr.getClientContextURL=function(t){return CQ_Analytics.ClientContextMgr.PATH+t},window.setTimeout(function(){CQ_Analytics.CCM.init()},1),CQ_Analytics.Utils.addListener(window,"unload",function(){try{for(var t in CQ_Analytics.ClientContextMgr)delete CQ_Analytics.ClientContextMgr[t];CQ_Analytics.ClientContextMgr=null}catch(e){}CQ_Analytics.CCM=null})),CQ_Analytics.ClientContextMgr&&!CQ_Analytics.ClientContextMgr.ServerStorage&&(CQ_Analytics.ClientContextMgr.ServerStorage=function(){this.posting=!1,this.initialized=!1;
},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_PAGELOAD=1,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_TIMER=2,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE_DATAUPDATE=4,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_TIMER=600,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_PROCESS_TIMER=60,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_MODE=6,CQ_Analytics.ClientContextMgr.ServerStorage.prototype.POST_PATH="/var/statistics/",CQ_Analytics.ClientContextMgr.ServerStorage.prototype.init=function(){if(this.isMode(CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_TIMER)){var t=this,e=function(){t.timer=window.setInterval(function(){try{var e=parseInt(t.data.lastPost),i=!1;if(isNaN(e))i=!0;else{var n=(new Date).getTime();n>e+1e3*CQ_Analytics.ClientContextMgr.ServerStorage.POST_TIMER&&(i=!0)}}catch(r){}i&&t.post()},1e3*CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER)};e.call(this)}this.initialized=!0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.isMode=function(t){return(CQ_Analytics.CCM.POST_MODE&t)>0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.handleStoreRegistration=function(t){this.initialized||this.init(),this.isMode(CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_DATAUPDATE)&&t.addListener("persist",function(){CQ_Analytics.ClientContextMgr.ServerStorage.post(t)})},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.startPosting=function(){this.posting=!0},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.stopPosting=function(){this.posting=!1},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.post=function(t,e){if(this.posting||e)try{var i=this.getCCMToJCR(t),n=CQ_Analytics.Utils.getTimestamp();i["./jcr:primaryType"]="nt:unstructured",i["./sessionId"]=CQ_Analytics.CCM.getSessionId();var r=this.POST_PATH+"clientcontext/";if(CQ_Analytics.CCM.isAnonymous()){var a=CQ_Analytics.Utils.insert(CQ_Analytics.CCM.getId(),2,"/");r+="anonymous/"+a+"/"+n}else r+="users/"+CQ_Analytics.CCM.getId()+"/"+n;CQ_Analytics.Utils.post(r,null,i),this.lastPost=n}catch(s){}},CQ_Analytics.ClientContextMgr.ServerStorage.prototype.getCCMToJCR=function(t){var e=CQ_Analytics.CCM.get(!0),i={};for(var n in e)if(!t||n==t){var r=e[n],a=(encodeURIComponent(n),typeof r);if("object"==a)for(var s in r){var o=r[s];s=s.replace(":","/"),i["./"+n+"/./"+s]=o}else i["./"+n]=r}return i},CQ_Analytics.ClientContextMgr.ServerStorage=new CQ_Analytics.ClientContextMgr.ServerStorage,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_PAGELOAD=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_PAGELOAD,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_MODE_DATAUPDATE=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE_DATAUPDATE,CQ_Analytics.ClickstreamcloudMgr.POST_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_PROCESS_TIMER=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PROCESS_TIMER,CQ_Analytics.ClickstreamcloudMgr.POST_MODE=CQ_Analytics.ClientContextMgr.ServerStorage.POST_MODE,CQ_Analytics.ClickstreamcloudMgr.POST_PATH=CQ_Analytics.ClientContextMgr.ServerStorage.POST_PATH),CQ_Analytics.Percentile={},CQ_Analytics.Percentile.matchesPercentiles=function(t){var e=ClientContext.get("/surferinfo/percentile");e||(e=Math.round(100*Math.random()),ClientContext.set("/surferinfo/percentile",e));for(var i=0;i<t.length;i++){var n=t[i];if(n.start<=e&&e<n.end)return!0}return!1},CQ_Analytics.SegmentMgr||(CQ_Analytics.SegmentMgr=function(){this.SEGMENTATION_ROOT="/etc/segmentation",this.SEGMENT_SELECTOR=".segment.js",this.SEGMENTATION_SCRIPT_LOADER="cq-segmentation-loader",this.segments={},this.boosts={};var t=this;this.fireUpdate=function(){t.fireEvent("update")},this.init()},CQ_Analytics.SegmentMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SegmentMgr.prototype.STORENAME="segments",CQ_Analytics.SegmentMgr.prototype.register=function(t,e,i){this.segments[t]=e,this.rulesCache&&this.rulesCache[t]&&(this.rulesCache[t]=!1),this.boosts[t]=isNaN(i)?0:parseInt(i),this.fireUpdate()},CQ_Analytics.SegmentMgr.prototype.resolveArray=function(t,e,i){if(e=e||CQ_Analytics.ClientContextMgr.get(),!(t instanceof Array))return this.resolve(t,e);i="AND"==i?"AND":"OR";for(var n="AND"==i,r=0;r<t.length;r++){var a=t[r],s=this.resolve(a,e);if("AND"==i){if(s!==!0)return s}else if(s===!0)return!0}return n},CQ_Analytics.SegmentMgr.prototype.resolve=function(segmentPath,clientcontext){if(clientcontext=clientcontext||CQ_Analytics.ClientContextMgr.get(),!segmentPath)return!1;if(segmentPath instanceof Array)return this.resolveArray(segmentPath,clientcontext);if(0!=segmentPath.indexOf(this.SEGMENTATION_ROOT))return!1;if(segmentPath==this.SEGMENTATION_ROOT)return!0;if(!this.segments[segmentPath])return!0;var parent=segmentPath.substring(0,segmentPath.lastIndexOf("/"));if(0==parent.indexOf(this.SEGMENTATION_ROOT)){var pres=this.resolve(parent,clientcontext);if(pres!==!0)return pres}var rules="function(clientcontext, contextcloud, clickstreamcloud) { return true ";rules+=" && ( "+this.segments[segmentPath]+" ) ",rules+=";}";var res=!0;try{var f=null;this.rulesCache=this.rulesCache||{},this.rulesCache[segmentPath]?f=this.rulesCache[segmentPath]:(eval("f = "+rules),this.rulesCache[segmentPath]=f);var e=null==f||f(clientcontext,clientcontext,clientcontext);res=res&&e===!0}catch(error){return"Unresolved - Error while evaluating segment "+segmentPath+" : "+error.message}return res},CQ_Analytics.SegmentMgr.prototype.getResolved=function(t){t=t||CQ_Analytics.ClientContextMgr.get();var e=new Array;for(var i in this.segments)this.resolve(i,t)===!0&&e.push(i);return e},CQ_Analytics.SegmentMgr.prototype.getMaxBoost=function(t,e){if(!(t instanceof Array))return this.getBoost(t);for(var i=0,n=0;n<t.length;n++){var r=t[n];if(this.resolve(r,e)===!0){var a=this.boosts[r]||0;a>i&&(i=a)}}return i},CQ_Analytics.SegmentMgr.prototype.getBoost=function(t){return t instanceof Array||(t=[t]),this.boosts[t]||0},CQ_Analytics.SegmentMgr.prototype.reload=function(path){var url=path;if(url||(url=this.SEGMENTATION_ROOT),url){-1==url.indexOf(this.SEGMENT_SELECTOR)&&(url+=this.SEGMENT_SELECTOR);try{CQ_Analytics.Utils.load(url,function(config,status,response){response&&response.responseText&&eval(response.responseText)},this);var response=CQ.HTTP.get(scripts[i].src)}catch(err){}}},CQ_Analytics.SegmentMgr.prototype.getSessionStore=function(){return this},CQ_Analytics.SegmentMgr.prototype.getProperty=function(t){return t},CQ_Analytics.SegmentMgr.prototype.getLink=function(t){return t+".html"},CQ_Analytics.SegmentMgr.prototype.getLabel=function(t){if(t){var e=t,i=e.lastIndexOf("/");-1!=i&&(e=e.substring(i+1,e.length));var n=this.resolve(t);if(n===!0)return e;if(n!==!0)return'<span class="invalid" title="'+n+'" alt="'+n+'">'+e+"</span>"}return t},CQ_Analytics.SegmentMgr.prototype.getPropertyNames=function(){return this.getResolved()},CQ_Analytics.SegmentMgr=new CQ_Analytics.SegmentMgr,CQ_Analytics.SegmentMgr.loadSegments=function(t){CQ_Analytics.SegmentMgr.areSegmentsLoaded=!1,CQ.shared.HTTP.get(CQ.shared.HTTP.externalize(t+".segment.js")),CQ_Analytics.SegmentMgr.areSegmentsLoaded=!0,this.fireEvent("segmentsload")},CQ_Analytics.SegmentMgr.renderer=function(t,e){if(t&&t.STORENAME==CQ_Analytics.SegmentMgr.STORENAME){var i=t.getPropertyNames(),n=[];n.push("<div>");for(var r=0;r<i.length;r++){var a=i[r];n.push('<span title="'+t.getProperty(a)+'" ><a href="'+CQ.shared.HTTP.externalize(t.getLink(a))+'"  title="'+t.getProperty(a)+'" >'+t.getLabel(a)+"</a></span>")}n.push("</div>"),$CQ("#"+e).children().remove(),$CQ("#"+e).append(n.join(""))}},CQ_Analytics.ClientContextMgr.addListener("storeupdate",CQ_Analytics.SegmentMgr.fireUpdate),CQ_Analytics.Utils.addListener(window,"unload",function(){try{for(var t in CQ_Analytics.SegmentMgr)delete CQ_Analytics.SegmentMgr[t]}catch(e){}CQ_Analytics.SegmentMgr=null})),CQ_Analytics.StrategyMgr||(CQ_Analytics.StrategyMgr=function(){this.strategies={}},CQ_Analytics.StrategyMgr.prototype={},CQ_Analytics.StrategyMgr.prototype.isRegistered=function(t){return!!this.strategies[t]},CQ_Analytics.StrategyMgr.prototype.register=function(t,e){"function"==typeof e&&(this.strategies[t]=e)},CQ_Analytics.StrategyMgr.prototype.choose=function(t,e){return 1==e.length?e[0]:this.strategies[t]?this.strategies[t].call(this,e):null},CQ_Analytics.StrategyMgr=new CQ_Analytics.StrategyMgr),CQ_Analytics.StrategyMgr.register("clickstream-score",function(t){if(1==t.length)return t[0];var e=[];if(CQ_Analytics.TagCloudMgr){var i=CQ_Analytics.TagCloudMgr.getTags();i=i||{};for(var n=-1,r=0;r<t.length;r++){var a=0,s=t[r].tags;if(s)for(var o=0;o<s.length;o++){var l=s[o].tagID;a+=parseInt(i[l])||0}a==n?e.push(t[r]):a>n&&(e=[],e.push(t[r]),n=a)}}else e=t;if(1==e.length)return e[0];var c=null;CQ_Analytics.PageDataMgr&&(c=CQ_Analytics.PageDataMgr.getProperty("random")),c||(c=window.CQ_StrategyRandom),c||(c=window.CQ_StrategyRandom=Math.random()),parseFloat(c)>1&&(c=1/c),1==parseFloat(c)&&(c=0);var C=Math.floor(c*e.length);return e[C]}),CQ_Analytics.StrategyMgr.register("first",function(t){return t[0]}),CQ_Analytics.StrategyMgr.register("random",function(t){var e=null;CQ_Analytics.PageDataMgr&&(e=CQ_Analytics.PageDataMgr.getProperty("random")),e||(e=window.CQ_StrategyRandom),e||(e=window.CQ_StrategyRandom=Math.random()),parseFloat(e)>1&&(e=1/e),1==parseFloat(e)&&(e=0);var i=Math.floor(e*t.length);return t[i]}),CQ_Analytics.PageDataMgr||(CQ_Analytics.PageDataMgr=function(){},CQ_Analytics.PageDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.PageDataMgr.prototype.STORENAME="pagedata",CQ_Analytics.PageDataMgr.prototype.FORCE_EXPERIENCE_COOKIE="cq-forceexperience",CQ_Analytics.PageDataMgr.prototype.init=function(){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t];this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.PageDataMgr.prototype.getLabel=function(t){return t},CQ_Analytics.PageDataMgr.prototype.getLink=function(t){return""},CQ_Analytics.PageDataMgr.prototype.setExperience=function(t){CQ.shared.HTTP.setCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,t,"/")},CQ_Analytics.PageDataMgr.prototype.getExperience=function(){return CQ.shared.HTTP.getCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,"/")},CQ_Analytics.PageDataMgr.prototype.clearExperience=function(){CQ.shared.HTTP.clearCookie(CQ_Analytics.PageDataMgr.FORCE_EXPERIENCE_COOKIE,"/")},CQ_Analytics.PageDataMgr=new CQ_Analytics.PageDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.loadInitProperties(CQ_Analytics.CCM.getInitialData(this.getName())),this.init(),CQ_Analytics.CCM.register(this)},CQ_Analytics.PageDataMgr)),CQ_Analytics.BrowserInfo=function(){var t=navigator.userAgent.toLowerCase(),e=function(e){return e.test(t)},i=function(){if(e(/opera/))return{browserFamily:"Opera",browserVersion:""};if(e(/chrome/))return{browserFamily:"Chrome",browserVersion:""};if(e(/safari/))return e(/applewebkit\/4/)?{browserFamily:"Safari",browserVersion:"2"}:e(/version\/3/)?{browserFamily:"Safari",browserVersion:"3"}:e(/version\/4/)?{browserFamily:"Safari",browserVersion:"4"}:e(/version\/5/)?{browserFamily:"Safari",browserVersion:"5"}:e(/version\/6/)?{browserFamily:"Safari",browserVersion:"6"}:{browserFamily:"Safari",browserVersion:"7 or higher"};if(e(/webkit/))return{browserFamily:"WebKit",browserVersion:""};if(e(/msie/))return e(/msie 6/)?{browserFamily:"IE",browserVersion:"6"}:e(/msie 7/)?{browserFamily:"IE",browserVersion:"7"}:e(/msie 8/)?{browserFamily:"IE",browserVersion:"8"}:e(/msie 9/)?{browserFamily:"IE",browserVersion:"9"}:e(/msie 10/)?{browserFamily:"IE",browserVersion:"10"}:{browserFamily:"IE",browserVersion:"11 or higher"};if(e(/gecko/))return e(/rv:1\.8/)?{browserFamily:"Firefox",browserVersion:"2"}:e(/rv:1\.9/)?{browserFamily:"Firefox",browserVersion:"3"}:e(/rv:2.0/)?{browserFamily:"Firefox",browserVersion:"4"}:e(/rv:5./)?{browserFamily:"Firefox",browserVersion:"5"}:e(/rv:6./)?{browserFamily:"Firefox",browserVersion:"6"}:e(/rv:7./)?{browserFamily:"Firefox",browserVersion:"7"}:e(/rv:8./)?{browserFamily:"Firefox",browserVersion:"8"}:e(/rv:9./)?{browserFamily:"Firefox",browserVersion:"9"}:{browserFamily:"Firefox",browserVersion:"10 or higher"};var t=e(/adobeair/);return t?{browserFamily:"Adobe AIR",browserVersion:""}:{browserFamily:"Unresolved",browserVersion:"Unresolved"}},n=function(){return e(/windows 98|win98/)?"Windows 98":e(/windows nt 5.0|windows 2000/)?"Windows 2000":e(/windows nt 5.1|windows xp/)?"Windows XP":e(/windows nt 5.2/)?"Windows Server 2003":e(/windows nt 6.0/)?"Windows Vista":e(/windows nt 6.1/)?"Windows 7":e(/windows nt 4.0|winnt4.0|winnt/)?"Windows NT 4.0":e(/windows me/)?"Windows ME":e(/mac os x/)?e(/ipad/)||e(/iphone/)?"iOS":"Mac OS X":e(/macintosh|mac os/)?"Mac OS":e(/android/)?"Android":e(/linux/)?"Linux":"Unresolved"},r=function(){return e(/ipad/)?"iPad":e(/iphone/)?"iPhone":e(/mobi/)?"Mobile":"Desktop"},a=i.call();this.browserFamily=a.browserFamily,this.browserVersion=a.browserVersion,this.OSName=n.call(),this.deviceType=r.call(),this.ua=t;/^https/i.test(window.location.protocol);this.screenResolution=screen.width+"x"+screen.height},CQ_Analytics.BrowserInfo.prototype={getBrowserName:function(){return this.browserFamily+" "+this.browserVersion},getBrowserFamily:function(){return this.browserFamily},getBrowserVersion:function(){return this.browserVersion},getOSName:function(){return this.OSName},getScreenResolution:function(){return this.screenResolution},getDeviceType:function(){return this.deviceType},getUserAgent:function(){return this.ua},isMobile:function(t){return t||(t=this.getDeviceType()),t=t?t.toLowerCase():"desktop","desktop"!=t},isIE:function(t){return"IE"==this.getBrowserFamily()&&(t?this.getBrowserVersion()==t:!0)},isIE6:function(){return this.isIE("6")},isIE7:function(){return this.isIE("7")},isIE8:function(){return this.isIE("8")},isIE9:function(){return this.isIE("9")}},CQ_Analytics.BrowserInfoInstance=new CQ_Analytics.BrowserInfo,CQ_Analytics.MousePositionMgr||(CQ_Analytics.MousePositionMgr=function(){this.position={x:0,y:0},this.getPageX=function(t){var e=t.pageX;return e||0===e||(e=t.clientX||0),e},this.getPageY=function(t){var e=t.pageY;return e||0===e||(e=t.clientY||0),e};var t=this;this.timer=null,$CQ(document).bind("mousemove",function(e,i,n,r){var a=e||window.event;if(a&&!t.timer){var s=t.getPageX(a),o=t.getPageY(a);t.timer=setTimeout(function(){t.setPosition(s,o),t.timer=null},500)}}),this.init()},CQ_Analytics.MousePositionMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.MousePositionMgr.prototype.STORENAME="mouseposition",CQ_Analytics.MousePositionMgr.prototype.setPosition=function(t,e){this.position.x=t,this.position.y=e,this.fireEvent("update")},CQ_Analytics.MousePositionMgr.prototype.getProperty=function(t){return this.position[t]},CQ_Analytics.MousePositionMgr.prototype.getLabel=function(t){return t},CQ_Analytics.MousePositionMgr.prototype.getLink=function(t){return""},CQ_Analytics.MousePositionMgr.prototype.getPropertyNames=function(){var t=new Array;for(var e in this.position)t.push(e);return t},CQ_Analytics.MousePositionMgr.prototype.getSessionStore=function(){return this},CQ_Analytics.MousePositionMgr.prototype.getData=function(t){return this.position},CQ_Analytics.MousePositionMgr.prototype.clear=function(){this.position={}},CQ_Analytics.MousePositionMgr=new CQ_Analytics.MousePositionMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this)},CQ_Analytics.MousePositionMgr)),CQ_Analytics.EventDataMgr||(CQ_Analytics.EventDataMgr=function(){},CQ_Analytics.EventDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.EventDataMgr.prototype.STORENAME="eventdata",CQ_Analytics.EventDataMgr.prototype.init=function(){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t];this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.EventDataMgr.prototype.getLabel=function(t){return t},CQ_Analytics.EventDataMgr.prototype.getLink=function(t){return""},CQ_Analytics.EventDataMgr=new CQ_Analytics.EventDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.loadInitProperties(CQ_Analytics.CCM.getInitialData(this.getName())),this.init(),CQ_Analytics.CCM.register(this)},CQ_Analytics.EventDataMgr)),window.CQ_Context||(window.CQ_Context=function(){},window.CQ_Context.prototype=new CQ_Analytics.Observable,window.CQ_Context.prototype.getProfile=function(){return function(){return{getUserId:function(){return this.getProperty("authorizableId")},getDisplayName:function(){var t=this.getProperty("formattedName");return t?t:(t=this.getProperty("displayName"),t?t:this.getUserId())},getFirstname:function(){return this.getProperty("givenName")},getLastname:function(){return this.getProperty("familyName")},getEmail:function(){return this.getProperty("email")},getProperty:function(t){return CQ_Analytics&&CQ_Analytics.ProfileDataMgr?CQ_Analytics.ProfileDataMgr.getProperty(t):""},getProperties:function(){return CQ_Analytics&&CQ_Analytics.ProfileDataMgr?CQ_Analytics.ProfileDataMgr.getData():{}},getAvatar:function(){return this.getProperty("avatar")},onUpdate:function(t,e){t&&CQ_Analytics&&CQ_Analytics.ProfileDataMgr&&CQ_Analytics.ProfileDataMgr.addListener("update",t,e||this)}}}()},window.CQ_Context=new window.CQ_Context),CQ_Analytics.Engine=function(){function t(){return!!(window.CQ&&CQ.WCM&&CQ.WCM.isEditMode())}function e(t){var e=$CQ.Deferred(),i=CQ.WCM.getEditable(t);return i?e.resolve(i):CQ.WCM.onEditableReady(t,function(t){e.resolve(t)}),e.promise()}function i(t,e){CQ_Analytics.loadedTeasersStack||(CQ_Analytics.loadedTeasersStack=[],$CQ(window).unload(function(){try{var t=CQ_Analytics.loadedTeasersStack;if(t){delete CQ_Analytics.loadedTeasersStack;for(var i=e,n=0;n<t.length;n++)i=CQ.shared.HTTP.addParameter(i,"path",t[n]);CQ.shared.HTTP.get(i,function(){})}}catch(r){}})),CQ_Analytics.loadedTeasersStack.push(t.path)}function n(t,e,i){function n(t,e,i,n){return'<a href="'+e+'" class="cq-teaser-segment-link"><img src="'+i+'" class="cq-teaser-decision-thumbnail '+(n?"cq-teaser-decision-match":"cq-teaser-decision-nomatch")+'"></a>'+t+"<br>"}for(var r,a="",s=0;s<t.length;s++){var o=t[s],l=CQ.shared.HTTP.externalize(o.teaser.path+".html");if(o.hasOwnProperty("boost")){r=o.noSegment?CQ.I18n.getMessage("Experience: {0} - match (no segments, boost = {1})",[o.teaser.title,o.boost]):CQ.I18n.getMessage("Experience: {0} - match (boost = {1})",[o.teaser.title,o.boost]);var c=n(r,l,o.teaser.thumbnail,!0);a+=e===o.teaser.path?"<b>"+c+"</b>":c}else r=o.unknownSegment?CQ.I18n.getMessage("Experience: {0} - no match (unknown segment)",[o.teaser.title]):CQ.I18n.getMessage("Experience: {0} - no match",[o.teaser.title]),a+=n(r,l,o.teaser.thumbnail,!1)}return a+="<br>",a+=i?CQ.I18n.getMessage("Strategy <b>{0}</b> selected current teaser.",i):CQ.I18n.getMessage("No strategy configured, used the first match."),a+="<br>"}function r(t,e,i,r){t.done(function(t){t.teaserToolTip&&(t.teaserToolTip.hide(),t.teaserToolTip.remove()),t.teaserToolTip=new CQ.Ext.Tip({html:n(e,i,r),title:CQ.I18n.getMessage("Selection decision"),width:450,autoHide:!1,closable:!0,height:300,floating:!0,autoHeight:!1,bodyStyle:"overflow-y: scroll;"}),t.on(CQ.wcm.EditRollover.EVENT_SHOW_HIGHTLIGHT,function(e){this.teaserInfoButton||(this.teaserInfoButton=CQ.Ext.DomHelper.append("CQ",{tag:"div",cls:"x-tool x-tool-help cq-teaser-tooltip-tool"},!0),this.teaserInfoButton.position("absolute"),this.teaserInfoButton.on("click",function(){var e=this.getXY();t.teaserToolTip.setPosition(e[0]-460,e[1]-100),t.teaserToolTip.show()})),this.teaserInfoButton.anchorTo(e.frameBottom.getEl(),"tr",[-26,-15]),this.teaserInfoButton.show()}),t.on(CQ.wcm.EditRollover.EVENT_HIDE_HIGHTLIGHT,function(t){this.teaserInfoButton&&this.teaserInfoButton.hide()})})}function a(t){t.done(function(t){t.teaserToolTip&&(t.teaserToolTip.hide(),t.teaserToolTip.remove(),t.teaserToolTip=null)})}function s(t,e){for(var i=[],n=0,r=0;r<t.length;r++){var a,s=t[r],o=s.segments;e&&(a={teaser:s},e.push(a));var l=!o||0===o.length;if(l&&a&&(a.noSegment=!0),!l&&CQ_Analytics.SegmentMgr.resolve(o)&&(l=!0,o&&o.length>0&&(CQ_Analytics.SegmentMgr.segments[o[0]]||(l=!1,a&&(a.unknownSegment=!0)))),l){var c=CQ_Analytics.SegmentMgr.getMaxBoost(o);a&&(a.boost=c),c===n?i.push(s):c>n&&(i=[],i.push(s),n=c)}}return i}function o(t,e){CQ_Analytics.Engine.stopTeaserLoader(t),l[t]=e}window.CQ_trackTeasersStats=!0;var l={};return{stopTeaserLoader:function(t){var e=t.path||t;if(e){var i=l[e];i&&(CQ_Analytics.SegmentMgr.removeListener("update",i),delete l[e])}},resolveTeaser:function(t,e,i){var n=s(t,i);return 0===n.length?null:CQ_Analytics.StrategyMgr.choose(e,n)||n[0]},loadTeaser:function(n){var s,l;t()&&(l=CQ.WCM.getEditablePathFromDOM(document.getElementById(n.targetID)),s=e(l));var c=ClientContext.get("campaign");if(!c||!c.isCampaignSelected()){var C=function(){var e=CQ_Analytics.PageDataMgr.getExperience();if(e){CQ_Analytics.PageDataMgr.clearExperience();var c="/_jcr_content/par.html";return t()&&(c+="?wcmmode=disabled"),void CQ_Analytics.Utils.loadElement(e+c,n.targetID)}var C=null,g=function(){var e=null;t()&&(e=[]);var o=CQ_Analytics.Engine.resolveTeaser(n.teasers,n.strategy,e);if(o){if(!C||C.path!==o.path){C=o;var l=o.url;t()&&(l+="?wcmmode=disabled"),CQ_Analytics.Utils.loadTeaserElement(l,n.targetID),window.CQ_trackTeasersStats&&n.trackingURL&&i(o,n.trackingURL),s&&r(s,e,C.path,n.strategy)}}else s&&a(s),CQ_Analytics.Utils.clearElement(n.targetID),C=null};g.call(),CQ_Analytics.SegmentMgr&&(l&&o(l,g),CQ_Analytics.SegmentMgr.addListener("update",g))};CQ_Analytics.CCM.areStoresInitialized?C.call(this):CQ_Analytics.CCM.addListener("storesinitialize",C)}}}}(),window.CQ_trackTeasersStats=!0,window.CQ_trackLandingPagesStats=!0,CQ_Analytics.PersistedJSONStore=function(){},CQ_Analytics.PersistedJSONStore.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.PersistedJSONStore.prototype.STOREKEY="",CQ_Analytics.PersistedJSONStore.prototype.STORENAME="",CQ_Analytics.PersistedJSONStore.prototype.init=function(){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),e=t.get(this.getStoreKey());if(e&&""!=e)this.data=this.parse(e);else{this.data={};for(var i in this.initProperty)this.data[i]=this.initProperty[i]}this.persist(),this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.PersistedJSONStore.prototype.clear=function(){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"});t.remove(this.getStoreKey()),this.data=null,this.initProperty={}},CQ_Analytics.PersistedJSONStore.prototype.initJSON=function(t,e){e||(this.initProperty={});var i=function(t,e,n){for(var r in n)"object"==typeof n[r]?i(t,e?e+"/"+r:r,n[r]):t[e?e+"/"+r:r]=n[r]};i(this.initProperty,null,t)},CQ_Analytics.PersistedJSONStore.prototype.getJSON=function(){var t=this.getData(),e={};for(var i in t)for(var n=i.split("/"),r=e,a=0;a<n.length;a++){var s=n[a];a==n.length-1?r[s]=t[i]:(r[s]=r[s]||{},r=r[s])}return e},CQ_Analytics.PersistedJSONStore.getInstance=function(t,e){var i=new CQ_Analytics.PersistedJSONStore;return i.STOREKEY=t.toUpperCase(),i.STORENAME=t,i.initJSON(e),i},CQ_Analytics.PersistedJSONStore.registerNewInstance=function(t,e){var i=CQ_Analytics.PersistedJSONStore.getInstance(t,e);return i.init(),CQ_Analytics.CCM.register(i),i},CQ_Analytics.JSONStore=function(){},CQ_Analytics.JSONStore.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.JSONStore.prototype.STOREKEY="",CQ_Analytics.JSONStore.prototype.STORENAME="",CQ_Analytics.JSONStore.prototype.init=function(){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t];this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.JSONStore.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.JSONStore.prototype.initJSON=function(t,e){e||(this.initProperty={});var i=function(t,e,n){for(var r in n)"object"==typeof n[r]?i(t,e?e+"/"+r:r,n[r]):t[e?e+"/"+r:r]=n[r]};i(this.initProperty,null,t)},CQ_Analytics.JSONStore.prototype.getJSON=function(){var t=this.getData(),e={};for(var i in t)for(var n=i.split("/"),r=e,a=0;a<n.length;a++){var s=n[a];a==n.length-1?r[s]=t[i]:(r[s]=r[s]||{},r=r[s])}return e},CQ_Analytics.JSONStore.getInstance=function(t,e){var i=new CQ_Analytics.JSONStore;return i.STOREKEY=t.toUpperCase(),i.STORENAME=t,i.initJSON(e),i},CQ_Analytics.JSONStore.registerNewInstance=function(t,e){var i=CQ_Analytics.JSONStore.getInstance(t,e);return i.init(),CQ_Analytics.CCM.register(i),i},CQ_Analytics.PersistedJSONPStore=function(){},CQ_Analytics.PersistedJSONPStore.prototype=new CQ_Analytics.PersistedJSONStore,CQ_Analytics.PersistedJSONPStore.prototype.setServiceURL=function(t){this.serviceURL=t},CQ_Analytics.PersistedJSONPStore.prototype.getServiceURL=function(){return this.serviceURL},CQ_Analytics.PersistedJSONPStore.prototype.load=function(t,e,i){var n=this.getName();CQ_Analytics.PersistedJSONPStore.JSONPCallbacks[this.getName()]||(CQ_Analytics.PersistedJSONPStore.JSONPCallbacks[n]=function(t){var r=CQ_Analytics.CCM.getRegisteredStore(n);r&&(r.initJSON(t),e&&r.initJSON(e,!0)),i&&i.call(r)}),t&&this.setServiceURL(t);var r=this.serviceURL;r=r.replace("${callback}","CQ_Analytics.PersistedJSONPStore.JSONPCallbacks."+n),$CQ.getScript(r)},CQ_Analytics.PersistedJSONPStore.JSONPCallbacks={},CQ_Analytics.PersistedJSONPStore.getInstance=function(t,e,i,n,r){if(t&&e)try{var a=new CQ_Analytics.PersistedJSONPStore;return a.STOREKEY=t.toUpperCase(),a.STORENAME=t,e&&a.setServiceURL(e),n||a.load(e,i,r),a}catch(s){console.log("Cannot create the JSONP store",t,e,s)}return null},CQ_Analytics.PersistedJSONPStore.registerNewInstance=function(t,e,i,n){if(!e)return null;if(!t){var r=CQ.shared.HTTP.getSchemeAndAuthority(e);r?-1!=r.indexOf(".")?(r=r.substring(0,r.lastIndexOf(".")),t=r.substring(r.lastIndexOf(".")+1)):t=r.substring(r.lastIndexOf("/")+1):t=e}var a=CQ_Analytics.PersistedJSONPStore.getInstance(t,e,i,!1,function(){this.init(),this.reset(),n&&n.call(this)});return null!=a?(CQ_Analytics.CCM.register(a),a):null},CQ_Analytics.JSONPStore=function(){},CQ_Analytics.JSONPStore.prototype=new CQ_Analytics.JSONStore,CQ_Analytics.JSONPStore.prototype.setServiceURL=function(t){this.serviceURL=t},CQ_Analytics.JSONPStore.prototype.getServiceURL=function(){return this.serviceURL},CQ_Analytics.JSONPStore.prototype.load=function(t,e,i){var n=this.getName();CQ_Analytics.JSONPStore.JSONPCallbacks[this.getName()]||(CQ_Analytics.JSONPStore.JSONPCallbacks[n]=function(t){var r=CQ_Analytics.CCM.getRegisteredStore(n);r&&(r.initJSON(t),e&&r.initJSON(e,!0)),i&&i.call(r)}),t&&this.setServiceURL(t);var r=this.serviceURL;r=r.replace("${callback}","CQ_Analytics.JSONPStore.JSONPCallbacks."+n),$CQ.getScript(r)},CQ_Analytics.JSONPStore.JSONPCallbacks={},CQ_Analytics.JSONPStore.getInstance=function(t,e,i,n,r){if(t)try{var a=new CQ_Analytics.JSONPStore;return a.STOREKEY=t.toUpperCase(),a.STORENAME=t,e&&(a.setServiceURL(e),n||a.load(e,i,r)),a}catch(s){console.log("Cannot create the JSONP store",t,e,s)}return null},CQ_Analytics.JSONPStore.registerNewInstance=function(t,e,i,n){if(!t&&e){var r=CQ.shared.HTTP.getSchemeAndAuthority(e);r?-1!=r.indexOf(".")?(r=r.substring(0,r.lastIndexOf(".")),t=r.substring(r.lastIndexOf(".")+1)):(t=r.substring(r.lastIndexOf("/")+1),t=t.replace(new RegExp(":","ig"),"_")):t=e}var a=CQ_Analytics.JSONPStore.getInstance(t,e,i,!1,function(){this.init(),this.reset(),n&&n.call(this)});return null!=a?(CQ_Analytics.CCM.register(a),a):null},CQ_Analytics.storeData=function(t,e){var i=function(t,e){for(var i=0;i<CQ_Analytics.Sitecatalyst.frameworkMappings.length;i++){var n=CQ_Analytics.Sitecatalyst.frameworkMappings[i];if(n[t]===e)return n}return null},n=function(t){return"string"==typeof t?t.replace(/[,;=\|]/g,""):t};for(var r in e)if("product"!==r){var a=r.indexOf("."),s=a>0?r.substr(0,a-1):void 0,o=a>0?r.substr(a):r;s&&CQ_Analytics.StoreRegistry.getStore(s)&&(t=CQ_Analytics.StoreRegistry.getStore(s)),t.setProperty(o,e[r])}else{var l=["category","sku","quantity","price","events","evars"],c=t.getProperty("products").split(",");c=""==c[0]?new Array:c;for(var e=e[r]instanceof Array?e[r]:[e[r]],C=0;C<e.length;C++){var g=e[C],d=new Array(6);for(var y in g){var a=l.indexOf(y);if(a>-1)if(4>a)d[a]=n(g[y]);else{var u=[];for(var p in g[y]){var f=t.getName()+"."+r+"."+y+"."+p,h=i("cqVar",f);if(h){u.push(h.scVar+"="+n(g[y][p]));var A=t.getProperty("events").split("");A.indexOf(h.cqVar)<0&&(A.push(h.cqVar.replace(/.+\./,"")),t.setProperty("events",A.join("")))}}d[a]=u.join("|")}}c.push(d.join(";"))}t.setProperty("products",c.join(","))}},CQ_Analytics.record=function(t){if(t.collect)return[t.event,t.values];if(t.event){t.options=t.options||{};try{CQ_Analytics.recordBeforeCallbacks.sort(function(t,e){return t.rank-e.rank});for(var e in CQ_Analytics.recordBeforeCallbacks)if(CQ_Analytics.recordBeforeCallbacks[e].func.call(this,t))return}catch(i){}var n=t.dataMgr||CQ_Analytics.EventDataMgr;n.reset(),"string"==typeof t.event?n.setProperty("events",t.event):n.setProperty("events",t.event.join("")),t.values&&CQ_Analytics.storeData(n,t.values);try{CQ_Analytics.recordAfterCallbacks.sort(function(t,e){return t.rank-e.rank});for(var e in CQ_Analytics.recordAfterCallbacks)if(CQ_Analytics.recordAfterCallbacks[e].func.call(this,t))return}catch(i){}}},CQ_Analytics.recordBeforeCallbacks=[],CQ_Analytics.recordAfterCallbacks=[],CQ_Analytics.registerBeforeCallback=function(t,e){CQ_Analytics.recordBeforeCallbacks.push({rank:e,func:t})},CQ_Analytics.registerAfterCallback=function(t,e){CQ_Analytics.recordAfterCallbacks.push({rank:e,func:t})},CQ_Analytics.ClientContext||(CQ_Analytics.ClientContext=new function(){return{get:function(t,e){if(t){0!=t.indexOf("/")&&(t="/"+t);var i=t.split("/")[1],n=t.substring(t.indexOf("/"+i)+i.length+2,t.length),r=CQ_Analytics.CCM.getRegisteredStore(i);if(r){if(n){var a=r.getProperty(n);return a&&e&&(a=CQ_Analytics.Variables.replaceVariables(a)),a}return r}}return null},set:function(t,e){if(t){0!=t.indexOf("/")&&(t="/"+t);var i=t.split("/")[1],n=t.substring(t.indexOf("/"+i)+i.length+2,t.length),r=CQ_Analytics.CCM.getRegisteredStore(i);r&&n&&r.setProperty(n,e)}},clear:function(){var t=CQ_Analytics.CCM.getStores();if(t)for(var e in t)t[e].clear&&t[e].clear()},reset:function(){var t=CQ_Analytics.CCM.getStores();if(t)for(var e in t)t[e].reset&&t[e].reset()},persist:function(t){CQ_Analytics.ClientContextMgr.ServerStorage.post(t,!0)}}},window.ClientContext=CQ_Analytics.ClientContext,window.ContextCloud=CQ_Analytics.ClientContext),CQ_Analytics&&!CQ_Analytics.TwitterProfileDataMgr&&(CQ_Analytics.TwitterProfileDataMgr=function(){},CQ_Analytics.TwitterProfileDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.TwitterProfileDataMgr.prototype.STOREKEY="TWITTERPROFILEDATA",CQ_Analytics.TwitterProfileDataMgr.prototype.STORENAME="twitterprofile",CQ_Analytics.TwitterProfileDataMgr.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.TwitterProfileDataMgr.prototype.init=function(){if(!this.data){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t]}},CQ_Analytics.TwitterProfileDataMgr.prototype.getLoaderURL=function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/twitterprofiledata/loader.json")},CQ_Analytics.TwitterProfileDataMgr.prototype.loadProfile=function(t){if(t){CQ_Analytics.TwitterProfileDataMgr.lastUid=t;var e=this.getLoaderURL();e=CQ_Analytics.Utils.addParameter(e,"authorizableId",t);try{var i=CQ.shared.HTTP.eval(e);if(i){this.data={};for(var n in i)this.data[n]=i[n];return this.fireEvent("update"),CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload(),!0}}catch(r){console&&console.log&&console.log("Error during profile loading",r);
}}return!1},CQ_Analytics.TwitterProfileDataMgr=new CQ_Analytics.TwitterProfileDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.ProfileDataMgr.addListener("update",function(){var t=CQ_Analytics.ProfileDataMgr.getProperty("authorizableId");t!=this.lastUid&&(CQ_Analytics.TwitterProfileDataMgr.loadProfile(t),this.fireEvent("update"))},CQ_Analytics.TwitterProfileDataMgr),CQ_Analytics.CCM.register(this)},CQ_Analytics.TwitterProfileDataMgr)),CQ_Analytics.FacebookProfileDataMgr||(CQ_Analytics.FacebookProfileDataMgr=function(){},CQ_Analytics.FacebookProfileDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.FacebookProfileDataMgr.prototype.STOREKEY="FBPROFILEDATA",CQ_Analytics.FacebookProfileDataMgr.prototype.STORENAME="facebookprofile",CQ_Analytics.FacebookProfileDataMgr.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.FacebookProfileDataMgr.prototype.init=function(){if(!this.data){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t]}},CQ_Analytics.FacebookProfileDataMgr.prototype.getLoaderURL=function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/fbprofiledata/loader.json")},CQ_Analytics.FacebookProfileDataMgr.prototype.loadProfile=function(t){if(t){CQ_Analytics.FacebookProfileDataMgr.lastUid=t;var e=this.getLoaderURL();e=CQ_Analytics.Utils.addParameter(e,"authorizableId",t);try{var i=CQ.shared.HTTP.eval(e);if(i){this.data={};for(var n in i)this.data[n]=i[n];return this.fireEvent("update"),this.fireEvent("checkBirthday"),CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload(),!0}}catch(r){console&&console.log&&console.log("Error during profile loading",r)}}return!1},CQ_Analytics.FacebookProfileDataMgr=new CQ_Analytics.FacebookProfileDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.ProfileDataMgr.addListener("update",function(){var t=CQ_Analytics.ProfileDataMgr.getProperty("authorizableId");t!=this.lastUid&&(CQ_Analytics.FacebookProfileDataMgr.loadProfile(t),this.fireEvent("update"))},CQ_Analytics.FacebookProfileDataMgr),CQ_Analytics.CCM.register(this)},CQ_Analytics.FacebookProfileDataMgr)),CQ_Analytics.FacebookInterestsMgr||(CQ_Analytics.FacebookInterestsMgr=function(){},CQ_Analytics.FacebookInterestsMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.FacebookInterestsMgr.prototype.STOREKEY="FBINTERESTSDATA",CQ_Analytics.FacebookInterestsMgr.prototype.STORENAME="fbinterests",CQ_Analytics.FacebookInterestsMgr.prototype.getLabel=function(t){return t},CQ_Analytics.FacebookInterestsMgr.prototype.getLink=function(t){return""},CQ_Analytics.FacebookInterestsMgr.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.FacebookInterestsMgr.prototype.getLoaderURL=function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/fbinterestsdata/loader.json")},CQ_Analytics.FacebookInterestsMgr.prototype.loadProfile=function(t){if(t){var e=this.getLoaderURL();e=CQ_Analytics.Utils.addParameter(e,"authorizableId",t),CQ_Analytics.FacebookInterestsMgr.lastUid=t;try{var i=CQ.shared.HTTP.eval(e);if(i){this.data={};for(var n in i)this.data[n]=i[n];return CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload(),!0}}catch(r){console&&console.log&&console.log("Error during profile loading",r)}}return!1},CQ_Analytics.FacebookInterestsMgr=new CQ_Analytics.FacebookInterestsMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.ProfileDataMgr.addListener("update",function(){var t=CQ_Analytics.ProfileDataMgr.getProperty("authorizableId");t!=this.lastUid&&(CQ_Analytics.FacebookInterestsMgr.loadProfile(t),this.fireEvent("update"))},CQ_Analytics.FacebookInterestsMgr),CQ_Analytics.CCM.register(this)},CQ_Analytics.FacebookInterestsMgr)),CQ_Analytics&&!CQ_Analytics.SalesforceProfileDataMgr&&(CQ_Analytics.SalesforceProfileDataMgr=function(){},CQ_Analytics.SalesforceProfileDataMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SalesforceProfileDataMgr.prototype.STOREKEY="SALESFORCEPROFILEDATA",CQ_Analytics.SalesforceProfileDataMgr.prototype.STORENAME="salesforceprofile",CQ_Analytics.SalesforceProfileDataMgr.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.SalesforceProfileDataMgr.prototype.init=function(){if(!this.data){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t]}},CQ_Analytics.SalesforceProfileDataMgr.prototype.getLoaderURL=function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/salesforceprofiledata/loader.json")},CQ_Analytics.SalesforceProfileDataMgr.prototype.loadProfile=function(t){CQ_Analytics.SalesforceProfileDataMgr.lastUid=t;var e=this.getLoaderURL();e=CQ_Analytics.Utils.addParameter(e,"authorizableId",t);try{var i=CQ.shared.HTTP.eval(e);if(i){this.data={};for(var n in i)this.data[n]=i[n];return this.fireEvent("update"),CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload(),!0}}catch(r){console&&console.log&&console.log("Error during profile loading",r)}return!1},CQ_Analytics.SalesforceProfileDataMgr=new CQ_Analytics.SalesforceProfileDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this)},CQ_Analytics.SalesforceProfileDataMgr)),CQ_Analytics.ViewedProducts||(CQ_Analytics.ViewedProducts=function(){this.data=null,this.MAX_COUNT=20},CQ_Analytics.ViewedProducts.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ViewedProducts.prototype.STOREKEY="VIEWEDPRODUCTS",CQ_Analytics.ViewedProducts.prototype.STORENAME="viewedproducts",CQ_Analytics.ViewedProducts.prototype.record=function(t,e,i,n){this.data||this.init();for(var r=0;r<this.data.length;r++)if(this.data[r].path==t){this.data.splice(r,1);break}this.data.length==this.MAX_COUNT&&this.data.shift(),this.data.push({path:t,title:e,image:i,price:n}),this.persist(),this.fireEvent("update")},CQ_Analytics.ViewedProducts.prototype.mostRecent=function(){return this.data||this.init(),this.data.length>0?this.data[this.data.length-1]:null},CQ_Analytics.ViewedProducts.prototype.mostRecentNotInCart=function(){if(this.data||this.init(),!CQ_Analytics.CartMgr)return this.mostRecent();for(var t=this.data.length-1;t>=0;t--){var e=this.data[t];if(!CQ_Analytics.CartHelper.containsProduct(CQ_Analytics.CartMgr.getData(),e.path,1))return e}return null},CQ_Analytics.ViewedProducts.prototype.recent=function(t,e){var i=[];this.data||this.init(),CQ_Analytics.CartMgr||(e=!1);for(var n=this.data.length-1;n>=0&&t>0;n--){var r=this.data[n];e&&CQ_Analytics.CartHelper.containsProduct(CQ_Analytics.CartMgr.getData(),r.path,1)||(i.push(r),t--)}return i},CQ_Analytics.ViewedProducts.prototype.getData=function(t){return this.data||this.init(),this.data},CQ_Analytics.ViewedProducts.prototype.init=function(){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),e=t.get(this.getStoreKey());e=null===e?"":new String(e);var i=e.split(";");this.data=[];for(var n=0;n<i.length;n++){var r=i[n].split(",");r.length>=4?this.data.push({path:r[0],title:r[1],image:r[2],price:r[3]}):r.length>=3&&this.data.push({path:r[0],title:r[1],image:r[2],price:void 0})}this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.ViewedProducts.prototype.persist=function(){if(this.fireEvent("beforepersist")!==!1){for(var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),e=[],i=0;i<this.data.length;i++){var n=this.data[i],r=n.path+","+n.title+","+n.image;n.price&&(r+=","+n.price),e.push(r)}t.set(this.getStoreKey(),e.join(";")),this.fireEvent("persist")}},CQ_Analytics.ViewedProducts.prototype.reset=function(){this.clear(),this.fireEvent("update")},CQ_Analytics.ViewedProducts.prototype.clear=function(){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"});t.remove(this.getStoreKey()),this.data=[]},CQ_Analytics.ViewedProducts=new CQ_Analytics.ViewedProducts,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this)},CQ_Analytics.ViewedProducts)),CQ_Analytics.TagCloudMgr||(CQ_Analytics.TagCloudMgr=function(){this.data=null,this.addedTags={},this.frequencies=null,this.initialTags=null,this.initialAddedTags={},this.copyObject=function(t){var e={};for(var i in t)e[i]=t[i];return e}},CQ_Analytics.TagCloudMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.TagCloudMgr.prototype.STOREKEY="TAGCLOUD",CQ_Analytics.TagCloudMgr.prototype.STORENAME="tagcloud",CQ_Analytics.TagCloudMgr.prototype.parseTagList=function(t){var e={},i=t.split(",");for(var n in i)if(i.hasOwnProperty(n)){var r=i[n].split("=");2==r.length&&(e[r[0]]=parseInt(r[1]))}return e},CQ_Analytics.TagCloudMgr.prototype.parseString=function(t){return this.data=this.parseTagList(t),this},CQ_Analytics.TagCloudMgr.prototype.add=function(t){this.addedTags[t]=!0,this.data[t]=(this.data[t]||0)+1},CQ_Analytics.TagCloudMgr.prototype.each=function(t){for(var e in this.data)this.data.hasOwnProperty(e)&&t(e,this.data[e])},CQ_Analytics.TagCloudMgr.prototype.calculateFrequencies=function(){var t={},e=[];return this.each(function(i,n){t[n]||e.push(n),t[n]=!0}),e.sort(function(t,e){return t>e?1:e>t?-1:0}),e},CQ_Analytics.TagCloudMgr.prototype.calculateNtile=function(t,e){null===this.frequencies&&(this.frequencies=this.calculateFrequencies());for(var i=0;;){if(i>=this.frequencies.length-1||this.frequencies[i]>=t)return Math.ceil((i+1)/this.frequencies.length*e);i++}},CQ_Analytics.TagCloudMgr.prototype.getTags=function(){return this.data},CQ_Analytics.TagCloudMgr.prototype.getData=function(t){return this.getTags()},CQ_Analytics.TagCloudMgr.prototype.getTag=function(t){return this.data[t]>0?this.data[t]:0},CQ_Analytics.TagCloudMgr.prototype.init=function(t){var e=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),i=e.get(this.getStoreKey());if(i=null===i?"":new String(i),this.data=this.parseTagList(i),t)for(var n in t)t.hasOwnProperty(n)&&this.add(t[n]);this.initialTags=this.copyObject(this.data),this.initialAddedTags=this.copyObject(this.addedTags),this.persist(),this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.TagCloudMgr.prototype.setProperty=function(t,e){null==this.data&&this.init(),e>0?(this.addedTags[t]=!0,this.data[t]=e>0?e:0):(delete this.addedTags[t],delete this.data[t]),this.persist(),this.fireEvent("update")},CQ_Analytics.TagCloudMgr.prototype.reset=function(){this.clear(),this.fireEvent("update")},CQ_Analytics.TagCloudMgr.prototype.getProperty=function(t){return null==this.data&&this.init(),this.data[t]>0?this.data[t]:0},CQ_Analytics.TagCloudMgr.prototype.removeProperty=function(t){null==this.data&&this.init(),this.setProperty(t,0)},CQ_Analytics.TagCloudMgr.prototype.clear=function(){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"});t.remove(this.getStoreKey()),this.addedTags={},this.data={}},CQ_Analytics.TagCloudMgr.prototype.getLink=function(t){return""},CQ_Analytics.TagCloudMgr.prototype.getLabel=function(t){if(t){var e=t.split(":"),i=e[e.length-1].split("/");t=i[i.length-1]}return t},CQ_Analytics.TagCloudMgr=new CQ_Analytics.TagCloudMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this)},CQ_Analytics.TagCloudMgr)),CQ_Analytics.SurferInfoMgr||(CQ_Analytics.SurferInfoMgr=function(){},CQ_Analytics.SurferInfoMgr.prototype=new CQ_Analytics.SessionStore,CQ_Analytics.SurferInfoMgr.prototype.STOREKEY="SURFERINFO",CQ_Analytics.SurferInfoMgr.prototype.STORENAME="surferinfo",CQ_Analytics.SurferInfoMgr.prototype.init=function(){this.data={};for(var t in this.initProperty)this.data[t]=this.initProperty[t];this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.SurferInfoMgr.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.SurferInfoMgr.prototype.getLabel=function(t){return t},CQ_Analytics.SurferInfoMgr.prototype.getLink=function(t){return""},CQ_Analytics.SurferInfoMgr=new CQ_Analytics.SurferInfoMgr,CQ_Analytics.CCM.addListener("configloaded",function(){var t=CQ_Analytics.BrowserInfoInstance;this.addInitProperty("browserFamily",t.getBrowserFamily()),this.addInitProperty("browserVersion",t.getBrowserVersion()),this.addInitProperty("browser","${/surferinfo/browserFamily} ${/surferinfo/browserVersion}"),this.addInitProperty("OS",t.getOSName()),this.addInitProperty("resolution",t.getScreenResolution()),this.addInitProperty("device",t.getDeviceType()),this.addInitProperty("isMobile",t.isMobile()),this.addInitProperty("userAgent",t.getUserAgent());var e=new Date;this.addInitProperty("day",e.getDate()),this.addInitProperty("month",e.getMonth()+1),this.addInitProperty("year",e.getFullYear()),this.addInitProperty("hours",e.getHours()),this.addInitProperty("minutes",e.getMinutes());var i="${/surferinfo/browserFamily}";t.isMobile()&&(i="${/surferinfo/device}"),this.addInitProperty("image",i);var n=CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/surferinfo/resources/${/surferinfo/image}.png");this.addInitProperty("thumbnail",n),CQ_Analytics.MousePositionMgr&&CQ_Analytics.MousePositionMgr.addListener("update",function(){this.setProperty("mouse X",CQ_Analytics.MousePositionMgr.getProperty("x")),this.setProperty("mouse Y",CQ_Analytics.MousePositionMgr.getProperty("y"))},this),this.addListener("update",function(){var e=this.getProperty("device"),i="${/surferinfo/browserFamily}";t.isMobile(e)&&(i="${/surferinfo/device}");var n=this.getProperty("image");n!=i&&this.setProperty("image",i)},this),CQ_Analytics.CCM.register(this)},CQ_Analytics.SurferInfoMgr)),CQ_Analytics.SocialGraphMgr||(CQ_Analytics.SocialGraphMgr=CQ_Analytics.JSONPStore.registerNewInstance("socialgraph"),CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this),CQ_Analytics.ProfileDataMgr.addListener("update",function(){var t=CQ_Analytics.ProfileDataMgr.getProperty("authorizableId");t!=this.lastUid&&this.fireEvent("update")},CQ_Analytics.SocialGraphMgr)},CQ_Analytics.SocialGraphMgr)),CQ_Analytics.SegmentMgr&&!CQ_Analytics.SegmentMgr.isResolvedRegistered&&(CQ_Analytics.SegmentMgr.isResolvedRegistered=!0,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.StoreRegistry.register(CQ_Analytics.SegmentMgr),CQ_Analytics.CCM.fireEvent("storeregister",CQ_Analytics.SegmentMgr)},CQ_Analytics.SegmentMgr)),CQ_Analytics.ProfileDataMgr||(CQ_Analytics.ProfileDataMgr=function(){this.addListener("beforepersist",function(){this.checkAuthorizableId()},this)},CQ_Analytics.ProfileDataMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.ProfileDataMgr.prototype.STOREKEY="PROFILEDATA",CQ_Analytics.ProfileDataMgr.prototype.STORENAME="profile",CQ_Analytics.ProfileDataMgr.prototype.LOADER_PATH=CQ_Analytics.Utils.externalize("/libs/cq/personalization/components/profileloader/content/load.js",!0),CQ_Analytics.ProfileDataMgr.prototype.PROFILE_LOADER=CQ_Analytics.Utils.externalize("/libs/cq/personalization/components/profileloader/content/load.json",!0),CQ_Analytics.ProfileDataMgr.prototype.init=function(){this.persistence=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),$CQ(CQ.shared.ClientSidePersistence).bind(CQ.shared.ClientSidePersistence.EVENT_NAME,function(t,e){if(e&&("CLIENTCONTEXT"===e.key||"PROFILEDATA"===e.key)&&e.mode!=CQ.shared.ClientSidePersistence.MODE_COOKIE.name){var i=new CQ.shared.ClientSidePersistence({container:"",mode:CQ.shared.ClientSidePersistence.MODE_COOKIE}),n=i.get(e.key);"PROFILEDATA"!==e.key||n&&""!=n||"set"==e.action||CQ.shared.ClientSidePersistence.clearAllMaps(),i.set(e.key,e.value)}});var t=this.persistence.get(this.getStoreKey());if(t&&""!=t)this.data=this.parse(t);else{this.data={};for(var e in this.initProperty)this.data[e]=this.initProperty[e]}this.persist(),this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.ProfileDataMgr.prototype.checkAuthorizableId=function(){this.data||this.init(),this.data.authorizableId?CQ_Analytics.CCM.setVisitorId(this.data.authorizableId):CQ_Analytics.CCM.setVisitorId("")},CQ_Analytics.ProfileDataMgr.prototype.getLabel=function(t){return t},CQ_Analytics.ProfileDataMgr.prototype.getLink=function(t){return""},CQ_Analytics.ProfileDataMgr.prototype.clear=function(){this.persistence&&this.persistence.remove(this.getStoreKey()),this.data=null,this.initProperty={}},CQ_Analytics.ProfileDataMgr.prototype.getLoaderURL=function(){return CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/profiledata/loader.json")},CQ_Analytics.ProfileDataMgr.prototype.loadProfile=function(t){var e=this.getLoaderURL();e=CQ_Analytics.Utils.addParameter(e,"authorizableId",t);try{var i=CQ.shared.HTTP.eval(e);if(i){this.data={};for(var n in i)this.data[n]=i[n];return this.persist(),this.fireEvent("initialize",this),this.fireEvent("update"),CQ_Analytics.ClickstreamcloudEditor&&CQ_Analytics.ClickstreamcloudEditor.reload(),!0}}catch(r){console&&console.log&&console.log("Error during profile loading",r)}return!1},CQ_Analytics.ProfileDataMgr=new CQ_Analytics.ProfileDataMgr,CQ_Analytics.CCM.addListener("configloaded",function(){this.checkAuthorizableId(),this.addListener("update",function(t,e){if("birthday"==e||!e){var i=this.getProperty("birthday"),n=this.getProperty("age"),r="";if(i)try{var a=function(t,e){var i=new Date(e.getTime());i.setUTCHours(t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds());var n=i.getTime()-t.getTime();return n/864e5},s=function(t){var e=new Date(t.getFullYear(),0,0);return-1*a(t,e)},o=new Date(Date.parse(i));if(isNaN(o.getTime()))r="";else{var l=new Date;if(s(o)==s(l)&&o.getMonth()==l.getMonth())r=CQ.shared.HTTP.externalize(CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/profiledata/resources/birthday_cake.png"));else{var c=l.getFullYear()-o.getFullYear();r=s(o)>s(l)?c:Math.max(0,c-1)}}}catch(C){r=""}n!=r&&this.setProperty("age",r)}}),CQ_Analytics.CCM.register(this)},CQ_Analytics.ProfileDataMgr)),CQ_Analytics.GeolocationUtils||(CQ_Analytics.GeolocationUtils=new function(){return{init:function(t){var e;try{e="undefined"==typeof navigator.geolocation?google.gears.factory.create("beta.geolocation"):navigator.geolocation}catch(i){}var n=function(e){var i=CQ_Analytics.PersistedJSONStore.registerNewInstance(t,e);i.addListener("update",function(e,n){var r=CQ_Analytics.ClientContext.get(t+"/latitude"),a=CQ_Analytics.ClientContext.get(t+"/longitude");r&&a?(i.getProperty("generatedThumbnail",!0)==CQ_Analytics.GeolocationUtils.THUMBNAILS.fallback&&i.setProperty("generatedThumbnail",i.getInitProperty("generatedThumbnail")),"latitude"!=n&&"longitude"!=n&&n||CQ_Analytics.GeolocationUtils.computeAddress(r,a,t)):"generatedThumbnail"!=n?i.setProperty("generatedThumbnail",CQ_Analytics.GeolocationUtils.THUMBNAILS.fallback):i.getProperty(n,!0)!=CQ_Analytics.GeolocationUtils.THUMBNAILS.fallback&&i.setProperty(n,CQ_Analytics.GeolocationUtils.THUMBNAILS.fallback)})},r=function(e,i){var r=CQ_Analytics.StoreRegistry.getStore(t);if(r){e=e||CQ_Analytics.GeolocationUtils.DEFAULTS;var a=e.generatedThumbnail=r.getInitProperty("generatedThumbnail");r.initJSON(e),i||(r.init(),r.setProperty("generatedThumbnail",a))}else n(e)};n(),e?e.getCurrentPosition(function(t){var e={longitude:t.coords.longitude,latitude:t.coords.latitude};t.address&&(e.address=t.address),r(e,CQ_Analytics.CCM.areStoresInitialized)},function(t){if(!CQ_Analytics.CCM.areStoresInitialized){var e="Error";CQ_Analytics.isUIAvailable&&(e=CQ.I18n.getMessage("Connection timeout",null,"timeout while connecting geolocation service"),1==t.code?e=CQ.I18n.getMessage("Permission denied",null,"permission denied message from goelocation service"):2==t.code&&(e=CQ.I18n.getMessage("Position unavailable",null,"geolocation service couldn't find location")));var i={address:{country:e}};r(i,CQ_Analytics.CCM.areStoresInitialized)}}):r()},computeAddress:function(t,e,i){CQ_Analytics.ClientContext.set(i+"/address/region"),CQ_Analytics.ClientContext.set(i+"/address/countryCode"),CQ_Analytics.ClientContext.set(i+"/address/country");var n=function(){var n=new google.maps.LatLng(t,e),r=new google.maps.Geocoder;r.geocode({location:n},function(t,e){if("OK"===e&&t[0]&&t[0].address_components)for(var n=0;n<t[0].address_components.length;n++){var r=t[0].address_components[n];r.types&&r.types.length&&("administrative_area_level_1"==r.types[0]?CQ_Analytics.ClientContext.set(i+"/address/region",r.short_name):"country"==r.types[0]&&(CQ_Analytics.ClientContext.set(i+"/address/countryCode",r.short_name),CQ_Analytics.ClientContext.set(i+"/address/country",r.long_name)))}})};window.google?n.call():(window.geocode_callback=n,$CQ.getScript(document.location.protocol+"//maps.google.com/maps/api/js?sensor=false&callback=geocode_callback"))}}},CQ_Analytics.GeolocationUtils.DEFAULTS={latitude:37.331375,longitude:-121.893992},CQ_Analytics.GeolocationUtils.THUMBNAILS={fallback:document.location.protocol+"//maps.googleapis.com/maps/api/staticmap?center=37,-121&zoom=0&size=80x80&sensor=false"}),CQ_Analytics.CartMgr||(CQ_Analytics.CartMgr=new CQ_Analytics.SessionStore,CQ_Analytics.CartMgr.STOREKEY="CART",CQ_Analytics.CartMgr.STORENAME="cart",CQ_Analytics.CartMgr.init=function(){if(this.data){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),e=t.get(this.STOREKEY);if(e){var i=e.split("=");i.length>=2&&(this.referenceTotalPrice=i[0],this.simulatedTotalPrice=i[1],this.updateSimulatedPrice())}this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")}else this.data={}},CQ_Analytics.CartMgr.persist=function(){if(this.fireEvent("beforepersist")!==!1){var t=new CQ_Analytics.SessionPersistence({container:"ClientContext"}),e=null;this.referenceTotalPrice&&this.simulatedTotalPrice&&(e=this.referenceTotalPrice+"="+this.simulatedTotalPrice),t.set(this.STOREKEY,e),this.fireEvent("persist")}},CQ_Analytics.CartMgr.updateSimulatedPrice=function(){this.simulatedTotalPrice&&this.referenceTotalPrice==this.data.totalPriceFloat?(this.data.totalPrice=this.simulatedTotalPrice+"",this.data.totalPriceFloat=this.simulatedTotalPrice):(this.simulatedTotalPrice=null,this.persist())},CQ_Analytics.CartMgr.registerSimulatedPrice=function(t){this.simulatedTotalPrice?(this.simulatedTotalPrice=t,this.data.totalPrice=t+""):(this.referenceTotalPrice=this.data.totalPriceFloat,this.simulatedTotalPrice=t),this.persist()},CQ_Analytics.CartMgr.getProperty=function(t,e){this.data||this.init();var i=this.data;try{for(var n=t.split("."),r=0;r<n.length-1;r++){var a=n[r],s=a.indexOf("["),o=-1;s>0&&(o=parseInt(a.substring(s+1,a.length-1)),a=a.substring(0,s)),i=i[a],o>=0&&(i=i[o])}var l=n[n.length-1];if(!e){var c=CQ.shared.XSS.getXSSPropertyName(l);if(i[c])return i[c]}return i[l]}catch(C){return}},CQ_Analytics.CartMgr.validate=function(t,e){if("totalPriceFloat"==t){var i=parseFloat(e);return i>=0}if(t.indexOf(".quantity")>0){var n=parseInt(e);return n>=0}return!0},CQ_Analytics.CartMgr.setProperty=function(t,e){if(this.data||this.init(),!this.validate(t,e))return void this.fireEvent("update",t);"totalPriceFloat"==t&&this.registerSimulatedPrice(e);for(var i=this.data,n=t.split("."),r=0;r<n.length-1;r++){var a=n[r],s=a.indexOf("["),o=-1;s>0&&(o=parseInt(a.substring(s+1,a.length-1)),a=a.substring(0,s)),i[a]||(i[a]={}),i=i[a],o>=0&&(i[o]||(i[o]={}),i=i[o])}var l=n[n.length-1];i[l]=e;var c=CQ.shared.XSS.getXSSPropertyName(l);this.data[c]=CQ.shared.XSS.getXSSValue(e),this.fireEvent("update",t)},CQ_Analytics.CartMgr.update=function(){var t=this;this.updateUrl&&$CQ.ajax({url:this.updateUrl,type:"POST",data:{cart:JSON.stringify(t.data)},externalize:!1,encodePath:!1,hook:!0,success:function(e){t.data=e,t.updateSimulatedPrice(),CQ_Analytics.ClientContextUtils.renderStore(CQ_Analytics.CartMgr.divId,CQ_Analytics.CartMgr.STORENAME),t.fireEvent("updatecomplete"),t.fireEvent("update")}})},CQ_Analytics.CartMgr.clear=function(){this.data.entries&&(this.data.entries=[]),this.data.vouchers&&(this.data.vouchers=[]),this.data.totalPrice="0",this.referenceTotalPrice=null,this.simulatedTotalPrice=null},CQ_Analytics.CartMgr.reset=function(){this.clear(),this.fireEvent("update"),this.persist(),this.update()},CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this),CQ_Analytics.SegmentMgr.addListener("update",function(){if(this.promotionsMap){this.data.promotions||(this.data.promotions=[]);for(var t=CQ_Analytics.SegmentMgr.getResolved(),e=[],i=0;i<this.promotionsMap.length;i++){for(var n=this.promotionsMap[i],r=!1,a=n.segments.split(","),s=0;s<a.length;s++)if($CQ.inArray(a[s],t)>=0){r=!0;break}r&&e.push(n.path)}for(var o=!1,i=0;i<this.data.promotions.length;i++){var l=this.data.promotions[i],s=$CQ.inArray(l.path,e);s>=0?e.splice(s,1):(this.data.promotions.splice(i--,1),o=!0)}for(var i=0;i<e.length;i++){var l={path:e[i]};this.data.promotions.push(l),o=!0}o&&this.update()}},CQ_Analytics.CartMgr)},CQ_Analytics.CartMgr)),CQ_Analytics.CartHelper||(CQ_Analytics.CartHelper=function(){return{containsProduct:function(t,e,i){for(var n=e?e.substring(0,e.lastIndexOf("#")):null,r=0;t.entries&&r<t.entries.length;r++){var a=t.entries[r],s=a.page.substring(0,a.page.lastIndexOf("#"));if((!e||s==n)&&(!i||a.quantity>=i))return!0}return!1}}}()),CQ_Analytics.CampaignMgr||(CQ_Analytics.CampaignMgr=function(){},CQ_Analytics.CampaignMgr.prototype=new CQ_Analytics.PersistedSessionStore,CQ_Analytics.CampaignMgr.prototype.STOREKEY="CAMPAIGN",CQ_Analytics.CampaignMgr.prototype.STORENAME="campaign",CQ_Analytics.CampaignMgr.prototype.DEFAULT_EXPERIENCE="DEFAULT",CQ_Analytics.CampaignMgr.prototype.init=function(){var t;this.persistence=new CQ_Analytics.SessionPersistence({container:"ClientContext"});var e=this.persistence.get(this.getStoreKey());if(this.data||(this.data={}),e&&""!==e){this.data=this.parse(e);var i=this.getInitProperty("campaigns");i&&(this.data.campaigns=i)}else for(t in this.initProperty)this.initProperty.hasOwnProperty(t)&&(this.data[t]=this.initProperty[t]);this.validate(),this.persist(),this.initialized=!0,this.fireEvent("initialize",this),this.fireEvent("update")},CQ_Analytics.CampaignMgr.prototype.validate=function(){this.data.campaigns&&(this.getCampaignBy("path",this.data.path)||this.getCampaignBy("id",this.data.id)||this.setCampaign(null),this.data["recipe/path"]!==CQ_Analytics.CampaignMgr.DEFAULT_EXPERIENCE&&(this.getExperienceBy("path",this.data["recipe/path"])||this.getExperienceBy("id",this.data["recipe/id"])||this.setExperience(null)))},CQ_Analytics.CampaignMgr.prototype.getCampaignBy=function(t,e){if(!this.data||!this.data.campaigns)return null;var i,n=this.data.campaigns;for(i=0;i<n.length;i++){var r=n[i];if(r[t]===e)return r}return null},CQ_Analytics.CampaignMgr.prototype.getExperienceBy=function(t,e){if(!this.data||!this.data.campaigns)return null;var i,n=this.data.campaigns;for(i=0;i<n.length;i++)for(var r=n[i],a=0;a<r.experiences.length;a++){var s=r.experiences[a];if(s[t]===e)return s}return null},CQ_Analytics.CampaignMgr.prototype.setCampaign=function(t){this.setProperties({name:t?t.title:"",path:t?t.path:"",id:t?t.id:"","recipe/name":t?CQ.I18n.getMessage("(default)"):"","recipe/path":t?this.DEFAULT_EXPERIENCE:"","recipe/id":t?this.DEFAULT_EXPERIENCE:""})},CQ_Analytics.CampaignMgr.prototype.setExperience=function(t){this.setProperties({"recipe/name":t?t.title:"","recipe/path":t?t.path:"","recipe/id":t?t.id:""})},CQ_Analytics.CampaignMgr.prototype.setProperty=function(t,e){return"id"===t||"path"===t?void this.setCampaign(this.getCampaignBy(t,e)):"recipe/id"!==t&&"recipe/path"!==t||e===CQ_Analytics.CampaignMgr.DEFAULT_EXPERIENCE?void CQ_Analytics.PersistedSessionStore.prototype.setProperty.call(this,t,e):void this.setExperience(this.getExperienceBy(t.substring("recipe/".length),e))},CQ_Analytics.CampaignMgr.prototype.isCampaignSelected=function(){return""!==this.getProperty("path")},CQ_Analytics.CampaignMgr.prototype.clear=function(){this.data=null,this.initProperty={}},CQ_Analytics.CampaignMgr.prototype.getLabel=function(t){return t},CQ_Analytics.CampaignMgr.prototype.getLink=function(t){return""},CQ_Analytics.CampaignMgr=new CQ_Analytics.CampaignMgr,CQ_Analytics.CCM.addListener("configloaded",function(){CQ_Analytics.CCM.register(this)},CQ_Analytics.CampaignMgr)),CQ_Analytics.ActivityStreamMgr||(CQ_Analytics.ActivityStreamMgr=CQ_Analytics.JSONStore.registerNewInstance("activitystream",{}),CQ_Analytics.ActivityStreamMgr.internalRenderer=function(t,e){var i=t+".form.html";i+=CQ_Analytics.ClientContextMgr.getClientContextURL("/contextstores/activitystream.html"),i+="?limit=3",CQ.shared.HTTP.get(i,function(t,i,n){$CQ("#"+e).children().remove(),i&&$CQ("#"+e).append(n.body)})},CQ_Analytics.ActivityStreamMgr.renderer=function(t,e){return t.isReady||(t.isReady=!0,CQ_Analytics.ClientContextUtils.onStoreRegistered("profile",function(t){t.addListener("update",function(t,i){var n=this.getProperty("path");n!=CQ_Analytics.ActivityStreamMgr.currentProfilePath&&(CQ_Analytics.ActivityStreamMgr.currentProfilePath=n,CQ_Analytics.ActivityStreamMgr.internalRenderer(n,e))},t);var i=t.getProperty("path");CQ_Analytics.ActivityStreamMgr.currentProfilePath=i,CQ_Analytics.ActivityStreamMgr.internalRenderer(i,e)})),""}),function(t){function e(){}function i(t){s=[t]}function n(t,e,i){return t&&t.apply(e.context||e,i)}function r(t){return/\?/.test(t)?"&":"?"}function a(a){function y(t){K++||(Y(),B&&(E[$]={s:[t]}),H&&(t=H.apply(a,[t])),n(U,a,[t,S,a]),n(F,a,[a,S]))}function x(t){K++||(Y(),B&&t!=v&&(E[$]=t),n(k,a,[a,t]),n(F,a,[a,t]))}a=t.extend({},w,a);var I,R,N,L,D,U=a.success,k=a.error,F=a.complete,H=a.dataFilter,V=a.callbackParameter,z=a.callback,J=a.cache,B=a.pageCache,j=a.charset,$=a.url,G=a.data,q=a.timeout,K=0,Y=e;return P&&P(function(t){t.done(U).fail(k),U=t.resolve,k=t.reject}).promise(a),a.abort=function(){!K++&&Y()},n(a.beforeSend,a,[a])===!1||K?a:($=$||c,G=G?"string"==typeof G?G:t.param(G,a.traditional):c,$+=G?r($)+G:c,V&&($+=r($)+encodeURIComponent(V)+"=?"),!J&&!B&&($+=r($)+"_"+(new Date).getTime()+"="),$=$.replace(/=\?(&|$)/,"="+z+"$1"),B&&(I=E[$])?I.s?y(I.s[0]):x(I):(M[z]=i,N=t(_)[0],N.id=d+T++,j&&(N[l]=j),O&&O.version()<11.6?(L=t(_)[0]).text="document.getElementById('"+N.id+"')."+p+"()":N[o]=o,b&&(N.htmlFor=N.id,N.event=u),N[f]=N[p]=N[h]=function(t){if(!N[A]||!/i/.test(N[A])){try{N[u]&&N[u]()}catch(e){}t=s,s=0,t?y(t[0]):x(C)}},N.src=$,Y=function(t){D&&clearTimeout(D),N[h]=N[f]=N[p]=null,m[Q](N),L&&m[Q](L)},m[g](N,R=m.firstChild),L&&m[g](L,R),D=q>0&&setTimeout(function(){x(v)},q)),a)}var s,o="async",l="charset",c="",C="error",g="insertBefore",d="_jqjsp",y="on",u=y+"click",p=y+C,f=y+"load",h=y+"readystatechange",A="readyState",Q="removeChild",_="<script>",S="success",v="timeout",M=window,P=t.Deferred,m=t("head")[0]||document.documentElement,E={},T=0,w={callback:d,url:location.href},O=M.opera,b=!!t("<div>").html("<!--[if IE]><i><![endif]-->").find("i").length;a.setup=function(e){t.extend(w,e)},t.jsonp=a}(jQuery),function(t){function e(t,e){var i,n,r,a,s,o,l,c;for(i=3&t.length,n=t.length-i,r=e,s=3432918353,o=461845907,c=0;n>c;)l=255&t.charCodeAt(c)|(255&t.charCodeAt(++c))<<8|(255&t.charCodeAt(++c))<<16|(255&t.charCodeAt(++c))<<24,++c,l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295,r^=l,r=r<<13|r>>>19,a=5*(65535&r)+((5*(r>>>16)&65535)<<16)&4294967295,r=(65535&a)+27492+(((a>>>16)+58964&65535)<<16);switch(l=0,i){case 3:l^=(255&t.charCodeAt(c+2))<<16;case 2:l^=(255&t.charCodeAt(c+1))<<8;case 1:l^=255&t.charCodeAt(c),l=(65535&l)*s+(((l>>>16)*s&65535)<<16)&4294967295,l=l<<15|l>>>17,l=(65535&l)*o+(((l>>>16)*o&65535)<<16)&4294967295,r^=l}return r^=t.length,r^=r>>>16,r=2246822507*(65535&r)+((2246822507*(r>>>16)&65535)<<16)&4294967295,r^=r>>>13,r=3266489909*(65535&r)+((3266489909*(r>>>16)&65535)<<16)&4294967295,r^=r>>>16,r>>>0}t.murmurhash3=e}(jQuery),CQ_Analytics=window.CQ_Analytics||{},CQ_Analytics.AAM=CQ_Analytics.AAM||{},CQ_Analytics.AAM.AudienceMgr=CQ_Analytics.AAM.AudienceMgr||function(t){"use strict";function e(t){
var e={};return $.each(t,function(t,i){if(l[i.cn]){var n=l[i.cn];if(i.dmn.slice(0,n.domain.length)===n.domain){var r=(n.segkey||"segs")+"=",a=r.length,s=n.keysep||",",o=n.valsep||";";$.each(i.cv.split(s),function(t,i){i.slice(0,a)===r&&$.each(i.substring(a).split(o),function(t,i){e[i]=!0})})}}}),e}function i(){}function n(t){u={};var e=[];$.each(t,function(t,i){i&&(u[t]=!0,e.push(t))}),e.sort();var i=p.getProperty("segments"),n=e.join(",");i!==n&&(p.setProperty("segments",n),d("Set segments to "+n))}function r(t,r){if(r=r||i,g)t.sid?$.getJSON(g,{t:t.sid},function(t){t.segments&&n(t.segments),r(),p.fireEvent("update")}).fail(function(t,e,i){y("Failed to resolve segments from AAM server  "+e+" error "+i),r(),p.fireEvent("update")}):(r(),p.fireEvent("update"));else{var a={};t=t||{},$.each(t,function(t,e){"sid"===t?a.d_sid=e:a["c_"+t]=e}),a.d_nsid=C,a.d_rtbd="json",$.jsonp({url:f,callback:"__aaminvoke",data:a,success:function(t,i,a){t.stuff&&n(e(t.stuff)),r(),p.fireEvent("update")},error:function(t,e){y("Failed to retieve json response "+e),r(),p.fireEvent("update")}})}}function a(){return u}function s(t){return u[t]}var o=t.partner||"geometrixx",l=t.destinationNames||{CQIntegrationDestination:{domain:".cqclientintegration.adobe.com",segkey:"segs",keysep:",",valsep:";"}},c=t.debug||!1,C=t.containerNSID||"0",g=!1;t.simulationPath&&(g=t.simulationPath+".segments.json");var d=function(){};c&&(d=function(t){console.log("DEBUG: audiencemanager.js "+t)});var y=function(t){console.log("ERROR: audiencemanager.js "+t)};d("Initialise Audience Manager");var u={},p=new CQ_Analytics.JSONStore,f="http://";return"https:"==document.location.protocol&&(f="https://"),f+=encodeURIComponent(o)+".demdex.net/event?d_cb=?",r(!1,function(){CQ_Analytics.ClientContextMgr.register(p)}),p.getUserSegments=a,p.matches=s,p.invoke=r,p};